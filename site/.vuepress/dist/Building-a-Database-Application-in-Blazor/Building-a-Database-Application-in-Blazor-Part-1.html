<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>A Blazor Database Template - Project Structure and Framework | Cold Elm Coders</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.44eeee96.css" as="style"><link rel="preload" href="/assets/js/app.a96bab3c.js" as="script"><link rel="preload" href="/assets/js/3.3d8b86b8.js" as="script"><link rel="preload" href="/assets/js/14.b0fec372.js" as="script"><link rel="prefetch" href="/assets/js/1.3b0fc1ec.js"><link rel="prefetch" href="/assets/js/10.a274dc46.js"><link rel="prefetch" href="/assets/js/11.162f7736.js"><link rel="prefetch" href="/assets/js/12.0bc9f964.js"><link rel="prefetch" href="/assets/js/13.b0705d6f.js"><link rel="prefetch" href="/assets/js/15.cb71d553.js"><link rel="prefetch" href="/assets/js/16.8f2a34f8.js"><link rel="prefetch" href="/assets/js/17.3ddfb39a.js"><link rel="prefetch" href="/assets/js/18.6e5e57eb.js"><link rel="prefetch" href="/assets/js/19.170882f0.js"><link rel="prefetch" href="/assets/js/20.23fde445.js"><link rel="prefetch" href="/assets/js/21.5d6a0b77.js"><link rel="prefetch" href="/assets/js/22.319e9c8b.js"><link rel="prefetch" href="/assets/js/23.f8e66cc9.js"><link rel="prefetch" href="/assets/js/24.65fd5f70.js"><link rel="prefetch" href="/assets/js/25.d231eb3a.js"><link rel="prefetch" href="/assets/js/26.bdc15d10.js"><link rel="prefetch" href="/assets/js/27.753499ce.js"><link rel="prefetch" href="/assets/js/28.ecd795c7.js"><link rel="prefetch" href="/assets/js/29.57d01ee4.js"><link rel="prefetch" href="/assets/js/30.1d1755ec.js"><link rel="prefetch" href="/assets/js/31.e29475e1.js"><link rel="prefetch" href="/assets/js/32.c42d5bd0.js"><link rel="prefetch" href="/assets/js/33.e3776b2e.js"><link rel="prefetch" href="/assets/js/34.86bd7e47.js"><link rel="prefetch" href="/assets/js/35.a3cc5f7b.js"><link rel="prefetch" href="/assets/js/36.91c34d67.js"><link rel="prefetch" href="/assets/js/37.10fbf619.js"><link rel="prefetch" href="/assets/js/38.8143bcfa.js"><link rel="prefetch" href="/assets/js/39.fc0c94f8.js"><link rel="prefetch" href="/assets/js/4.0476436c.js"><link rel="prefetch" href="/assets/js/40.1941f394.js"><link rel="prefetch" href="/assets/js/41.6a31a359.js"><link rel="prefetch" href="/assets/js/42.c214c146.js"><link rel="prefetch" href="/assets/js/43.e367e3ff.js"><link rel="prefetch" href="/assets/js/44.1c8fb58c.js"><link rel="prefetch" href="/assets/js/45.b6c76ef8.js"><link rel="prefetch" href="/assets/js/46.2c60e8dc.js"><link rel="prefetch" href="/assets/js/47.58f3a570.js"><link rel="prefetch" href="/assets/js/5.c21f6997.js"><link rel="prefetch" href="/assets/js/6.c00c814d.js"><link rel="prefetch" href="/assets/js/7.f63b3fdb.js"><link rel="prefetch" href="/assets/js/8.a4f8ac88.js"><link rel="prefetch" href="/assets/js/9.62cada5e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.44eeee96.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Cold Elm Coders</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/articles/" class="nav-link">
  Articles
</a></div><div class="nav-item"><a href="/posts/" class="nav-link">
  Posts
</a></div><div class="nav-item"><a href="/ArchivedArticles/" class="nav-link">
  Old Articles
</a></div><div class="nav-item"><a href="/Building-a-Database-Application-in-Blazor/" class="nav-link router-link-active">
  Database Application
</a></div><div class="nav-item"><a href="https://cec-blazor-examples.azurewebsites.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demo Site
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/articles/" class="nav-link">
  Articles
</a></div><div class="nav-item"><a href="/posts/" class="nav-link">
  Posts
</a></div><div class="nav-item"><a href="/ArchivedArticles/" class="nav-link">
  Old Articles
</a></div><div class="nav-item"><a href="/Building-a-Database-Application-in-Blazor/" class="nav-link router-link-active">
  Database Application
</a></div><div class="nav-item"><a href="https://cec-blazor-examples.azurewebsites.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demo Site
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Blazor Database Application</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Building-a-Database-Application-in-Blazor/" aria-current="page" class="sidebar-link">Building a Database Application in Blazor</a></li><li><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-1.html" aria-current="page" class="active sidebar-link">A Blazor Database Template - Project Structure and Framework</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-1.html#repository-and-database" class="sidebar-link">Repository and Database</a></li><li class="sidebar-sub-header"><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-1.html#design-philosophy" class="sidebar-link">Design Philosophy</a></li><li class="sidebar-sub-header"><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-1.html#solution-structure" class="sidebar-link">Solution Structure</a></li><li class="sidebar-sub-header"><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-1.html#ui-structure" class="sidebar-link">UI Structure</a></li><li class="sidebar-sub-header"><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-1.html#blazor-database-wasm-project" class="sidebar-link">Blazor.Database.WASM Project</a></li><li class="sidebar-sub-header"><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-1.html#blazor-database-web-project" class="sidebar-link">Blazor.Database.Web Project</a></li><li class="sidebar-sub-header"><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-1.html#wrap-up" class="sidebar-link">Wrap Up</a></li><li class="sidebar-sub-header"><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-1.html#history" class="sidebar-link">History</a></li></ul></li><li><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-2.html" class="sidebar-link">Part 2 - Building the Services</a></li><li><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-3.html" class="sidebar-link">Part 3 - Building Edit and View UI Components</a></li><li><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-4.html" class="sidebar-link">Part 3 - UI Components</a></li><li><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-5.html" class="sidebar-link">Part 5 - View Components - CRUD List Operations in the UI</a></li><li><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-6.html" class="sidebar-link">Part 6 - Adding new Record Types and Their UI to the Weather Application</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="building-a-database-application-in-blazor"><a href="#building-a-database-application-in-blazor" class="header-anchor">#</a> Building a Database Application in Blazor</h1> <h1 id="part-1-project-structure-and-framework"><a href="#part-1-project-structure-and-framework" class="header-anchor">#</a> Part 1 - Project Structure and Framework</h1> <div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>This article and all the others in this series is a building site.  Total revamp.  See CodeProject for the most recent released version which is very out-of-date</p></div> <p>This set of articles describes a framework for building and structuring Database Applications in Blazor.</p> <p>It is <strong>A</strong> framework, not <strong>THE</strong> framework.  I make no recommendations, use it or abuse it.  It's what I current use on my projects.  It's lightly opinionated: it uses out-of-the-box Blazor/Razor/DotNetCore systems and toolkits whereever possible and a lightly modified BootStrap CSS framework.</p> <p>There are 6 articles:</p> <ol><li>Project Structure and Framework.</li> <li>Services - Building the CRUD Data Layers.</li> <li>View Components - CRUD Edit and View Operations in the UI.</li> <li>UI Components - Building HTML/CSS Controls.</li> <li>View Components - CRUD List Operations in the UI.</li> <li>A walk through detailing how to add records to the application -  weather stations and weather station data.</li></ol> <p>The articles have changed drastically from their original release:</p> <ol><li>The whole framework is less opinionated.  I've dropped the more radical approaches I used as I've developed solutions using the current framework.</li> <li>The libraries have major code updates, particularly in the Data Services.</li> <li>Everything has been updated to Net5.</li> <li>The Repo home has moved.</li> <li>Server and WASM SPAs are now hosted and run from the same site.</li></ol> <p>They are not:</p> <ol><li>An attempt to define best practice.</li> <li>The finished product.</li></ol> <p>This first articles proves an overview and a study of the Framework.</p> <h2 id="repository-and-database"><a href="#repository-and-database" class="header-anchor">#</a> Repository and Database</h2> <p>The repository for the articles has moved to <a href="https://github.com/ShaunCurtis/Blazor.Database" target="_blank" rel="noopener noreferrer">Blazor.Database Repository<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.  <a href="https://github.com/ShaunCurtis/CEC.Blazor" target="_blank" rel="noopener noreferrer">CEC.Blazor GitHub Repository<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is now obselete and will be removed.</p> <p>There's a SQL script in /SQL in the repository for building the database.</p> <p>The Server and WASM versions of the site have been combined into a single site.  You can switch between the two in the left hand menu.  The site starts in Server mode - <a href="https://cec-blazor-server.azurewebsites.net/" target="_blank" rel="noopener noreferrer">https://cec-blazor-server.azurewebsites.net/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="design-philosophy"><a href="#design-philosophy" class="header-anchor">#</a> Design Philosophy</h2> <h3 id="data"><a href="#data" class="header-anchor">#</a> Data</h3> <p>The data side of the project is structured loosely on the three tier - data, logical and presentation layer - model.  The data layers implement standard CRUDL - Create/Read/Update/Delete/List - actions against database entities.</p> <p>The application library contains two <code>DbContext</code> classes:</p> <ol><li><code>LocalWeatherDbContext</code> uses a standard SQL database with a connection string defined in <code>AppSettings</code>.</li> <li><code>InMemoryWeatherDbContext</code> uses an In-Memory SQLite database for testing and demo purposes.</li></ol> <p>The <code>DbContext</code> services are created through a DBContextFactory implemented on services as <code>AddDBContextFactory</code>.  The services are comsumed through it's <code>IDbContextFactory&lt;TDbContext&gt;</code> interface.</p> <p>The base data layer is defined by a <code>IFactoryDataService</code> interface.  <code>FactoryDataService</code> is an abstract level implementation of <code>IFactoryDataService</code>.  There are three data services that implement most of the boilerplate code:</p> <ol><li><code>FactoryServerDataService</code> for normal SQL databases.  It's all <code>Async</code> and uses <code>IDbContextFactory</code> to generate <code>DbContext</code> instances for each transaction.</li> <li><code>FactoryServerInMemoryDataService</code>.  A SQLite In-Memory database only exists within a single <code>DbContext</code>, so this data service creates a single <code>DbContext</code> instance at startup and uses it for all transactions.</li> <li><code>FactoryWASMDataService</code> for WASM SPAs.  This data service makes remote API calls to the API server.</li></ol> <p>To demonstrate the degree to which the case can be boilerplated, the declaration of the Local Database Data Service is:</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LocalDatabaseDataService</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">FactoryServerDataService<span class="token punctuation">&lt;</span>LocalWeatherDbContext<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">LocalDatabaseDataService</span><span class="token punctuation">(</span><span class="token class-name">IConfiguration</span> configuration<span class="token punctuation">,</span> <span class="token class-name">IDbContextFactory<span class="token punctuation">&lt;</span>LocalWeatherDbContext<span class="token punctuation">&gt;</span></span> dbContext<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>configuration<span class="token punctuation">,</span> dbContext<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>and the Controller Service for the WeatherForecast:</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WeatherForecastControllerService</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">FactoryControllerService<span class="token punctuation">&lt;</span>WeatherForecast<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">WeatherForecastControllerService</span><span class="token punctuation">(</span><span class="token class-name">IFactoryDataService</span> factoryDataService<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>factoryDataService<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>We'll examine these in detail in articles two and three, along with the specific implementations for the Weather application.</p> <p>The UI Interface layer is defined by <code>IFactoryControllerService</code> with a base abstract implementation in <code>FactoryControllerService</code>.  Again we'll look at these in detail in articles two and three.</p> <p>The data services are accessed using dependency injection, either directly or through their interfaces.</p> <h3 id="ui"><a href="#ui" class="header-anchor">#</a> UI</h3> <p>I step back from the basic <em>Pages</em> philosophy - I think this is one area the Microsoft (and other SPA frameworks) could have introduced some new terminology.  There are no <em>Pages</em> directories except in the <em>Web</em> project.  SPAs aren't web sites.  We need step outside the webpage paradigm.  The Blazor UI is a component based; to think of it as a web page perpetuates the paradigm.  The only web page is the launch page on the server.  Once the SPA launches, the application changes out components to transition between Views.  I've built an SPA with no router or Urls in sight - just like a desktop application.</p> <p>I'll use the following terminology thoughout these articles:</p> <ol><li>Page - the launch web page on the web site.  The only page in an SPA.</li> <li>RouteView/Routed Component.  These are all terms used by various people describing the pseudo page.  I call these RouteViews.  This is the content displayed in the content section of a Layout, and normally determined by a defined route.  We'll look at these in a little more detail later in this article.</li> <li>Forms.  Forms are logical collections of controls that are either displayed in a view or a modal dialog.  Lists, view forms, edit forms are all classic forms. Forms contain controls not HTML.</li> <li>Controls.  Controls are components that display something: they emit HTML code.  For example, an edit box, a dropdown, button, ... A Form is a collection of controls.</li></ol> <p>The application is configured to build and deploy both Server or WASM versions of the SPA, and host both on the same web site.  The base solution architecture is:</p> <ol><li>Core Razor Library - contains the code that can be deployed to any application.  These could be built and deployed as a Nuget Package.</li> <li>Application Razor Library - contains the specific code for the application shared by the Server and WASM projects.</li> <li>Server Razor Library - secific code for the Server SPA.  Principly the Views/Routed Components and startup App.  This project should contain very little code.</li> <li>WASM Web Project - specific code to build the WASM SPA. Again, principly the Views/Routed Components and startup App.  This project should contain very little code.</li> <li>ASPNetCore Razor Web Project.  The host project that contains the startup pages for the WASM and Server SPAs, the services for the Blazor Server Hub and the server-side API Controllers for the WASM SPA.</li></ol> <h2 id="solution-structure"><a href="#solution-structure" class="header-anchor">#</a> Solution Structure</h2> <p>I use Visual Studio, so the Github repository consists of a solution with five projects.  These are:</p> <ol><li>Blazor.SPA - the core library containing everything that can be boilerplated and reused across any project.</li> <li>Blazor.Database - this is the library shared by the other projests.  Almost all the project code lives here.  Examples are the EF DB Context, Model classes, model specific CRUD components, Bootstrap SCSS, Views, Forms, ...</li> <li>Blazor.Database.WASM - the WASM Client project.</li> <li>Blazor.Database.Web - The host ASPNetCore server.</li></ol> <p>You may have noticed at this point that there's no Server project.  You don't need one</p> <h2 id="ui-structure"><a href="#ui-structure" class="header-anchor">#</a> UI Structure</h2> <p>The application uses a structure approach to the UI.  This makes it easier to stop repeating the same old Razor/Html markup across an application, build re-usable components and move code from the application into libraries.</p> <h3 id="pages"><a href="#pages" class="header-anchor">#</a> Pages</h3> <p>Pages are the web pages that act as the host for the the application.  There's one per application.</p> <h3 id="routeviews"><a href="#routeviews" class="header-anchor">#</a> RouteViews</h3> <p>RouteViews are the components loaded into the root <code>App</code> component, normally by the Router through a Layout.  They don't have to be.  You can write your own View Manager, and you don't have to use Layouts.  The only two requirements for a View are:</p> <ol><li>It must be declared as a razor component.</li> <li>It must declare one or more routes using the <code>@page</code> directive.</li></ol> <p>In the WASM application the <code>Counter</code> view is declared as shown below.  Very minimalist, because we want to share the actual counter code between the applications, so it becomes a <em>Form</em> in the shared library.  It just contains the route declaration and the top level form component.</p> <div class="language-html extra-class"><pre class="language-html"><code>@page &quot;/counter&quot;
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>CounterComponent</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>CounterComponent</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>The purpose of the RouteView is to declare routes that the <code>Router</code> component can find when the SPA starts.  The root component <code>App</code> is shown below which declares the <code>Router</code> component.  <code>AppAssembly=&quot;@typeof(WASMApp).Assembly&quot;</code> points the router to the assembly it browses to find route declarations.  In this case it's pointed to assembly containing the root component.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Router</span> <span class="token attr-name">AppAssembly</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@typeof(WASMApp).Assembly<span class="token punctuation">&quot;</span></span> <span class="token attr-name">PreferExactMatches</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Found</span> <span class="token attr-name">Context</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>routeData<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>RouteView</span> <span class="token attr-name">RouteData</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@routeData<span class="token punctuation">&quot;</span></span> <span class="token attr-name">DefaultLayout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@typeof(WASMLayout)<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Found</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>NotFound</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>LayoutView</span> <span class="token attr-name">Layout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@typeof(WASMLayout)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Sorry, there's nothing at this address.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>LayoutView</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>NotFound</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Router</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Note that <code>Router</code> calls them RouteViews which is why I call them that.</p> <h3 id="layouts"><a href="#layouts" class="header-anchor">#</a> Layouts</h3> <p>Layouts are out-of-the-box Blazor Layouts.  The Router renders the Layout with the <code>RouteView</code> as the child content.  There's a default <code>Layout</code> defined in the <code>Router</code> definition.  I'll skip layouts here, we've had them for a long while and they are adequately covered elsewhere.</p> <h3 id="forms"><a href="#forms" class="header-anchor">#</a> Forms</h3> <p>A form is a mid level unit in the component hierarchy.  RouteViews can contain one or more forms
. Forms are logical collections of controls that are either displayed in a view or a modal dialog.  Lists, view forms, edit forms are all classic forms. Forms contain controls not Html.</p> <h3 id="controls"><a href="#controls" class="header-anchor">#</a> Controls</h3> <p>A control is the low level component.  It's where the Html code is built.  Controls can contain other controls to build more complex controls.</p> <p>How often do you repeat the same Html code in a Razor component.  What you do in Razor you wouldn't dream of doing in C# code.  You'd write a helper method.  Why not do the same thing in components.</p> <div class="language-html extra-class"><pre class="language-html"><code>// mylist.razor
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>px-1 py-2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>xxxx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
.... 10 times
</code></pre></div><p>may appear more complicated that:</p> <div class="language-html extra-class"><pre class="language-html"><code>// UiListRow.razor
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>px-1 py-2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>@childContent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>and:</p> <div class="language-html extra-class"><pre class="language-html"><code>// mylist.razor
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>UiListRow</span><span class="token punctuation">&gt;</span></span>xxxx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>UiListRow</span><span class="token punctuation">&gt;</span></span>
.... 10 times
</code></pre></div><p>but changing the padding across the application is simple in the component approach and a pain in markup.</p> <div class="language-html extra-class"><pre class="language-html"><code>// UiListRow.razor
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>px-1 py-1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>@childContent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="blazor-database-wasm-project"><a href="#blazor-database-wasm-project" class="header-anchor">#</a> Blazor.Database.WASM Project</h2> <p><img src="https://raw.githubusercontent.com/ShaunCurtis/CEC.Blazor.SPA/master/Images/CEC-Weather-WASM-Client-Project-View.png" alt="Project Files"></p> <p>The project is almost empty.  The controls and services are all in the libraries.  It contains only the code needed to build the WASM executable.</p> <h3 id="program-cs"><a href="#program-cs" class="header-anchor">#</a> Program.cs</h3> <p><code>CEC.Blazor</code> and local application services are loaded.  Note the Blazor root component is defined here.  You don't have to use <code>App</code> - we're using <code>WASMApp</code>.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task</span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span></span> args<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token class-name"><span class="token keyword">var</span></span> builder <span class="token operator">=</span> WebAssemblyHostBuilder<span class="token punctuation">.</span><span class="token function">CreateDefault</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    builder<span class="token punctuation">.</span>RootComponents<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Add</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>WASMApp<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;#app&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    builder<span class="token punctuation">.</span>Services<span class="token punctuation">.</span><span class="token function">AddScoped</span><span class="token punctuation">(</span>sp <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HttpClient</span> <span class="token punctuation">{</span> BaseAddress <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Uri</span><span class="token punctuation">(</span>builder<span class="token punctuation">.</span>HostEnvironment<span class="token punctuation">.</span>BaseAddress<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    builder<span class="token punctuation">.</span>Services<span class="token punctuation">.</span><span class="token function">AddApplicationServices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">await</span> builder<span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">RunAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Services for each project/library are specified in <code>IServiceCollection</code> Extensions.</p> <h4 id="servicecollectionextensions-cs"><a href="#servicecollectionextensions-cs" class="header-anchor">#</a> ServiceCollectionExtensions.cs</h4> <p>The site specific services loaded are the controller service <code>WeatherForecastControllerService</code> and the data service as an <code>IFactoryDataService</code> interface loading  <code>FactoryWASMDataService</code>.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">ServiceCollectionExtensions</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">IServiceCollection</span> <span class="token function">AddApplicationServices</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddScoped</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IFactoryDataService<span class="token punctuation">,</span> FactoryWASMDataService<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddScoped</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>WeatherForecastControllerService<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> services<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="blazor-database-wasm-csproj"><a href="#blazor-database-wasm-csproj" class="header-anchor">#</a> Blazor.Database.WASM.csproj</h4> <p>The final setup on the WASM project is to set the <code>StaticWebAssetBasePath</code> in the project file.  This will let us run the WASM and Server version together on the <em>Web</em> project.</p> <div class="language-xml extra-class"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>PropertyGroup</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TargetFramework</span><span class="token punctuation">&gt;</span></span>net5.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>TargetFramework</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>StaticWebAssetBasePath</span><span class="token punctuation">&gt;</span></span>WASM<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>StaticWebAssetBasePath</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>PropertyGroup</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>### wasm.html

`wasm.html` is an almost out-of-the-box  `index.html` with:

1. Added stylesheet references.  Note that you use the virtual directory `_content/Assembly_Name` to access content exposed in the `wwwroot` folders of dependency assembles and the reference to the component styling - `CEC.Weather.WASM.Server.styles.css`.  Scripts are accessed in the same way.
2. The base content of `app` is an HTML block that displays a spinner while the application is initializing. 

![App Start Screen](https://github.com/ShaunCurtis/CEC.Blazor.SPA/blob/master/Images/WASM-Start-Screen.png?raw=true)

```html
&lt;!DOCTYPE html&gt;
&lt;html&gt;

&lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;
    &lt;title&gt;CEC.Blazor.WASM&lt;/title&gt;
    &lt;base href=&quot;/&quot; /&gt;
    &lt;link href=&quot;https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i&quot; rel=&quot;stylesheet&quot;&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;CEC.Weather.WASM.Server.styles.css&quot; /&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;_content/CEC.Blazor.SPA/site.min.css&quot; /&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;_content/CEC.Weather/css/site.min.css&quot; /&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;div id=&quot;app&quot;&gt;
        &lt;div class=&quot;mt-4&quot; style=&quot;margin-right:auto; margin-left:auto; width:100%;&quot;&gt;
            &lt;div class=&quot;loader&quot;&gt;&lt;/div&gt;
            &lt;div style=&quot;width:100%; text-align:center;&quot;&gt;&lt;h4&gt;Web Application Loading&lt;/h4&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;div id=&quot;blazor-error-ui&quot;&gt;
        An unhandled error has occurred.
        &lt;a href=&quot;&quot; class=&quot;reload&quot;&gt;Reload&lt;/a&gt;
        &lt;a class=&quot;dismiss&quot;&gt;ðŸ—™&lt;/a&gt;
    &lt;/div&gt;
    &lt;script src=&quot;_framework/blazor.webassembly.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;_content/CEC.Blazor.SPA/site.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;
</code></pre></div><h3 id="css"><a href="#css" class="header-anchor">#</a> CSS</h3> <p>All CSS is shared, so lives in <code>CEC.Weather</code>.  I use Bootstrap, customized a little with SASS.  I have the WEB COMPILER extension installed in Visual Studio to compile SASS files on the fly.</p> <h2 id="blazor-database-web-project"><a href="#blazor-database-web-project" class="header-anchor">#</a> Blazor.Database.Web Project</h2> <p><img src="https://github.com/ShaunCurtis/CEC.Blazor.SPA/blob/master/Images/CEC-Weather-Server-Project-View.png?raw=true" alt="Project Files"></p> <h3 id="css-2"><a href="#css-2" class="header-anchor">#</a> CSS</h3> <p>The project uses a SCSS to build a custom version of Bootstrap, with some colour and small formatting differences.  I'll not cover the setup here - search <em>shaun curtis blazor css frameworks</em> to find an article I've written on the subject.</p> <h4 id="pages-2"><a href="#pages-2" class="header-anchor">#</a> Pages</h4> <p>We have two real pages - the standard issue <code>_Host.cshtml</code> for starting the Blazor Server SPA and <code>_WASM.cshtml</code> to start the WASM SPA.</p> <h4 id="host-cshtml"><a href="#host-cshtml" class="header-anchor">#</a> _Host.cshtml</h4> <p>Standard Blazor Server startup page.  Note:</p> <ol><li>The stylesheet references to the custom CSS and the component CSS.</li> <li>The <em>blazor.server.js</em> file script reference.</li> <li>The <code>component</code> reference to the root component - in this case <code>Blazor.Database.Server.Components.ServerApp</code>.  The root coponent is in the <em>Blazor.Database.Server</em> library.</li></ol> <div class="language-html extra-class"><pre class="language-html"><code>@page &quot;/&quot;
@namespace Blazor.Database.Web.Pages
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    Layout = null;
}

<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Blazor.Database.Web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>~/<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>css/site.min.css<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Blazor.Database.Web.styles.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>typeof(Blazor.Database.Server.Components.ServerApp)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">render-mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ServerPrerendered<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>blazor-error-ui<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">include</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Staging,Production<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            An error has occurred. This application may no longer respond until reloaded.
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>environment</span> <span class="token attr-name">include</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Development<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            An unhandled exception has occurred. See browser dev tools for details.
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>environment</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reload<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Reload<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dismiss<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>ðŸ—™<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>_content/Blazor.Database/site.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>_framework/blazor.server.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h4 id="wasm-cshtml"><a href="#wasm-cshtml" class="header-anchor">#</a> _WASM.cshtml</h4> <p>This is just a server version of  WASM <em>index.html</em>*.</p> <ol><li>The same CSS references and the server file.</li> <li>The same <em>site.js</em>.</li> <li>The <code>&lt;base href&gt;</code> set to the WASM subdirectory.</li> <li><em>blazor.webassembly.js</em> referenced to the subdirectory.</li></ol> <div class="language-csharp extra-class"><pre class="language-csharp"><code>@page <span class="token string">&quot;/WASM&quot;</span>
@<span class="token keyword">namespace</span> Blazor<span class="token punctuation">.</span>Database<span class="token punctuation">.</span>Web<span class="token punctuation">.</span>Pages
@addTagHelper <span class="token operator">*</span><span class="token punctuation">,</span> Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Mvc<span class="token punctuation">.</span>TagHelpers
@<span class="token punctuation">{</span>
    Layout <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">meta</span> charset<span class="token operator">=</span><span class="token string">&quot;utf-8&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">meta</span> name<span class="token operator">=</span><span class="token string">&quot;viewport&quot;</span> content<span class="token operator">=</span><span class="token string">&quot;width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Blazor<span class="token punctuation">.</span>DataBase<span class="token punctuation">.</span>WASM<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token keyword">base</span> href<span class="token operator">=</span><span class="token string">&quot;/WASM/&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">link</span> rel<span class="token operator">=</span><span class="token string">&quot;stylesheet&quot;</span> href<span class="token operator">=</span><span class="token string">&quot;/css/site.min.css&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">link</span> href<span class="token operator">=</span><span class="token string">&quot;/Blazor.Database.Web.styles.css&quot;</span> rel<span class="token operator">=</span><span class="token string">&quot;stylesheet&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">div</span> id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;mt-4&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;margin-right:auto; margin-left:auto; width:100%;&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;loader&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">div</span> style<span class="token operator">=</span><span class="token string">&quot;width:100%; text-align:center;&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>h4<span class="token operator">&gt;</span>Web Application Loading<span class="token operator">&lt;</span><span class="token operator">/</span>h4<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span><span class="token class-name">div</span> id<span class="token operator">=</span><span class="token string">&quot;blazor-error-ui&quot;</span><span class="token operator">&gt;</span>
        An unhandled error has occurred<span class="token punctuation">.</span>
        <span class="token operator">&lt;</span><span class="token class-name">a</span> href<span class="token operator">=</span><span class="token string">&quot;&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;reload&quot;</span><span class="token operator">&gt;</span>Reload<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>a <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;dismiss&quot;</span><span class="token operator">&gt;</span>ðŸ—™<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">script</span> src<span class="token operator">=</span><span class="token string">&quot;_content/Blazor.Database/site.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">script</span> src<span class="token operator">=</span><span class="token string">&quot;/WASM/_framework/blazor.webassembly.js&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre></div><h4 id="startup-cs"><a href="#startup-cs" class="header-anchor">#</a> Startup.cs</h4> <p>The local services and <code>CEC.Blazor.SPA</code> library services are added.  It:</p> <ol><li>Adds the Blazor Server side Services</li> <li>Configures two Middleware pathways, dependant on the Url.</li></ol> <p>I'll not go into detail here - you can read more about multi SPA hosting in a separate article - search <em>shaun curtis blazor hydra</em>.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Startup</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">Startup</span><span class="token punctuation">(</span><span class="token class-name">IConfiguration</span> configuration<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Configuration <span class="token operator">=</span> configuration<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">IConfiguration</span> Configuration <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">ConfigureServices</span><span class="token punctuation">(</span><span class="token class-name">IServiceCollection</span> services<span class="token punctuation">)</span><span class="token punctuation">{</span>
        services<span class="token punctuation">.</span><span class="token function">AddRazorPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        services<span class="token punctuation">.</span><span class="token function">AddServerSideBlazor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        services<span class="token punctuation">.</span><span class="token function">AddControllersWithViews</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// services.AddApplicationServices(this.Configuration);</span>
        services<span class="token punctuation">.</span><span class="token function">AddInMemoryApplicationServices</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>Configuration<span class="token punctuation">)</span><span class="token punctuation">;</span>
            
        <span class="token comment">// Server Side Blazor doesn't register HttpClient by default</span>
        <span class="token comment">// Thanks to Robin Sue - Suchiman https://github.com/Suchiman/BlazorDualMode</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>services<span class="token punctuation">.</span><span class="token function">Any</span><span class="token punctuation">(</span>x <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>ServiceType <span class="token operator">==</span> <span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">HttpClient</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// Setup HttpClient for server side in a client side compatible fashion</span>
            services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddScoped</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>HttpClient<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>s <span class="token operator">=&gt;</span>
            <span class="token punctuation">{</span>
                <span class="token comment">// Creating the URI helper needs to wait until the JS Runtime is initialized, so defer it.</span>
                <span class="token class-name"><span class="token keyword">var</span></span> uriHelper <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetRequiredService</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>NavigationManager<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">HttpClient</span>
                <span class="token punctuation">{</span>
                    BaseAddress <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Uri</span><span class="token punctuation">(</span>uriHelper<span class="token punctuation">.</span>BaseUri<span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Configure</span><span class="token punctuation">(</span><span class="token class-name">IApplicationBuilder</span> app<span class="token punctuation">,</span> <span class="token class-name">IWebHostEnvironment</span> env<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>env<span class="token punctuation">.</span><span class="token function">IsDevelopment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            app<span class="token punctuation">.</span><span class="token function">UseDeveloperExceptionPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{</span>
            app<span class="token punctuation">.</span><span class="token function">UseExceptionHandler</span><span class="token punctuation">(</span><span class="token string">&quot;/Error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            app<span class="token punctuation">.</span><span class="token function">UseHsts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        app<span class="token punctuation">.</span><span class="token function">UseHttpsRedirection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        app<span class="token punctuation">.</span><span class="token function">UseStaticFiles</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        app<span class="token punctuation">.</span><span class="token function">MapWhen</span><span class="token punctuation">(</span>ctx <span class="token operator">=&gt;</span> ctx<span class="token punctuation">.</span>Request<span class="token punctuation">.</span>Path<span class="token punctuation">.</span><span class="token function">StartsWithSegments</span><span class="token punctuation">(</span><span class="token string">&quot;/WASM&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> app1 <span class="token operator">=&gt;</span>
        <span class="token punctuation">{</span>
            app1<span class="token punctuation">.</span><span class="token function">UseBlazorFrameworkFiles</span><span class="token punctuation">(</span><span class="token string">&quot;/WASM&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            app1<span class="token punctuation">.</span><span class="token function">UseRouting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            app1<span class="token punctuation">.</span><span class="token function">UseEndpoints</span><span class="token punctuation">(</span>endpoints <span class="token operator">=&gt;</span>
            <span class="token punctuation">{</span>
                endpoints<span class="token punctuation">.</span><span class="token function">MapFallbackToPage</span><span class="token punctuation">(</span><span class="token string">&quot;/red/{*path:nonfile}&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/_WASM&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        app<span class="token punctuation">.</span><span class="token function">UseRouting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        app<span class="token punctuation">.</span><span class="token function">UseEndpoints</span><span class="token punctuation">(</span>endpoints <span class="token operator">=&gt;</span>
        <span class="token punctuation">{</span>
            endpoints<span class="token punctuation">.</span><span class="token function">MapControllers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            endpoints<span class="token punctuation">.</span><span class="token function">MapBlazorHub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            endpoints<span class="token punctuation">.</span><span class="token function">MapRazorPages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            endpoints<span class="token punctuation">.</span><span class="token function">MapFallbackToPage</span><span class="token punctuation">(</span><span class="token string">&quot;/Server/{*path:nonfile}&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/_Host&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            endpoints<span class="token punctuation">.</span><span class="token function">MapFallbackToPage</span><span class="token punctuation">(</span><span class="token string">&quot;/_Host&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="servicecollectionextensions-cs-2"><a href="#servicecollectionextensions-cs-2" class="header-anchor">#</a> ServiceCollectionExtensions.cs</h4> <p>There are two service collection extension methods.  One for a normal SQL database and a second for the testing In-Memory database.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">IServiceCollection</span> <span class="token function">AddApplicationServices</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">IServiceCollection</span> services<span class="token punctuation">,</span> <span class="token class-name">IConfiguration</span> configuration<span class="token punctuation">)</span>
<span class="token punctuation">{</span>

    <span class="token comment">// Local DB Setup</span>
    <span class="token class-name"><span class="token keyword">var</span></span> dbContext <span class="token operator">=</span> configuration<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;Configuration:DBContext&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddDbContextFactory</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>LocalWeatherDbContext<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>options <span class="token operator">=&gt;</span> options<span class="token punctuation">.</span><span class="token function">UseSqlServer</span><span class="token punctuation">(</span>dbContext<span class="token punctuation">)</span><span class="token punctuation">,</span> ServiceLifetime<span class="token punctuation">.</span>Singleton<span class="token punctuation">)</span><span class="token punctuation">;</span>
    services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IFactoryDataService<span class="token punctuation">,</span> LocalDatabaseDataService<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddScoped</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>WeatherForecastControllerService<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> services<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">IServiceCollection</span> <span class="token function">AddInMemoryApplicationServices</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">IServiceCollection</span> services<span class="token punctuation">,</span> <span class="token class-name">IConfiguration</span> configuration<span class="token punctuation">)</span>
<span class="token punctuation">{</span>

    <span class="token comment">// In Memory DB Setup</span>
    <span class="token class-name"><span class="token keyword">var</span></span> memdbContext <span class="token operator">=</span> <span class="token string">&quot;Data Source=:memory:&quot;</span><span class="token punctuation">;</span>
    services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddDbContextFactory</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>InMemoryWeatherDbContext<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>options <span class="token operator">=&gt;</span> options<span class="token punctuation">.</span><span class="token function">UseSqlite</span><span class="token punctuation">(</span>memdbContext<span class="token punctuation">)</span><span class="token punctuation">,</span> ServiceLifetime<span class="token punctuation">.</span>Singleton<span class="token punctuation">)</span><span class="token punctuation">;</span>
    services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IFactoryDataService<span class="token punctuation">,</span> TestDatabaseDataService<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddScoped</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>WeatherForecastControllerService<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> services<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="wrap-up"><a href="#wrap-up" class="header-anchor">#</a> Wrap Up</h2> <p>That wraps up this section.  It's a bit of an overview, with a lot more detail to come later.  Hopefully it demonstrates the level of abstraction you can achieve with Blazor projects.  The next section looks at Services and implementing the data layers.</p> <p>Some key points to note:</p> <ol><li>You can build your code with common code for Server and WASM projects.  With care you can write an application that can be deployed either way as is the case with this project.</li> <li>Both WASM and Server can be run from the same web site, and you can switch between the two.</li> <li>Be very careful about the terminology.  Understand the different meanings of &quot;Page&quot;.</li></ol> <h2 id="history"><a href="#history" class="header-anchor">#</a> History</h2> <ul><li>15-Sep-2020: Initial version</li> <li>17-Nov-2020: Major Blazor.CEC library changes.  Change to ViewManager from Router and new Component base implementation.</li> <li>26-Mar-2021: Major updates to Services, project structure and data editing</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/Building-a-Database-Application-in-Blazor/" class="prev router-link-active">
        Building a Database Application in Blazor
      </a></span> <span class="next"><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-2.html">
        Part 2 - Building the Services
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.a96bab3c.js" defer></script><script src="/assets/js/3.3d8b86b8.js" defer></script><script src="/assets/js/14.b0fec372.js" defer></script>
  </body>
</html>
