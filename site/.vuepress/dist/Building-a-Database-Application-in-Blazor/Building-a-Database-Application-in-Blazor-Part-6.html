<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Part 6 - Adding new Record Types and Their UI to the Weather Application | Cold Elm Coders</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.44eeee96.css" as="style"><link rel="preload" href="/assets/js/app.a96bab3c.js" as="script"><link rel="preload" href="/assets/js/3.3d8b86b8.js" as="script"><link rel="preload" href="/assets/js/19.170882f0.js" as="script"><link rel="prefetch" href="/assets/js/1.3b0fc1ec.js"><link rel="prefetch" href="/assets/js/10.a274dc46.js"><link rel="prefetch" href="/assets/js/11.162f7736.js"><link rel="prefetch" href="/assets/js/12.0bc9f964.js"><link rel="prefetch" href="/assets/js/13.b0705d6f.js"><link rel="prefetch" href="/assets/js/14.b0fec372.js"><link rel="prefetch" href="/assets/js/15.cb71d553.js"><link rel="prefetch" href="/assets/js/16.8f2a34f8.js"><link rel="prefetch" href="/assets/js/17.3ddfb39a.js"><link rel="prefetch" href="/assets/js/18.6e5e57eb.js"><link rel="prefetch" href="/assets/js/20.23fde445.js"><link rel="prefetch" href="/assets/js/21.5d6a0b77.js"><link rel="prefetch" href="/assets/js/22.319e9c8b.js"><link rel="prefetch" href="/assets/js/23.f8e66cc9.js"><link rel="prefetch" href="/assets/js/24.65fd5f70.js"><link rel="prefetch" href="/assets/js/25.d231eb3a.js"><link rel="prefetch" href="/assets/js/26.bdc15d10.js"><link rel="prefetch" href="/assets/js/27.753499ce.js"><link rel="prefetch" href="/assets/js/28.ecd795c7.js"><link rel="prefetch" href="/assets/js/29.57d01ee4.js"><link rel="prefetch" href="/assets/js/30.1d1755ec.js"><link rel="prefetch" href="/assets/js/31.e29475e1.js"><link rel="prefetch" href="/assets/js/32.c42d5bd0.js"><link rel="prefetch" href="/assets/js/33.e3776b2e.js"><link rel="prefetch" href="/assets/js/34.86bd7e47.js"><link rel="prefetch" href="/assets/js/35.a3cc5f7b.js"><link rel="prefetch" href="/assets/js/36.91c34d67.js"><link rel="prefetch" href="/assets/js/37.10fbf619.js"><link rel="prefetch" href="/assets/js/38.8143bcfa.js"><link rel="prefetch" href="/assets/js/39.fc0c94f8.js"><link rel="prefetch" href="/assets/js/4.0476436c.js"><link rel="prefetch" href="/assets/js/40.1941f394.js"><link rel="prefetch" href="/assets/js/41.6a31a359.js"><link rel="prefetch" href="/assets/js/42.c214c146.js"><link rel="prefetch" href="/assets/js/43.e367e3ff.js"><link rel="prefetch" href="/assets/js/44.1c8fb58c.js"><link rel="prefetch" href="/assets/js/45.b6c76ef8.js"><link rel="prefetch" href="/assets/js/46.2c60e8dc.js"><link rel="prefetch" href="/assets/js/47.58f3a570.js"><link rel="prefetch" href="/assets/js/5.c21f6997.js"><link rel="prefetch" href="/assets/js/6.c00c814d.js"><link rel="prefetch" href="/assets/js/7.f63b3fdb.js"><link rel="prefetch" href="/assets/js/8.a4f8ac88.js"><link rel="prefetch" href="/assets/js/9.62cada5e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.44eeee96.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Cold Elm Coders</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/articles/" class="nav-link">
  Articles
</a></div><div class="nav-item"><a href="/posts/" class="nav-link">
  Posts
</a></div><div class="nav-item"><a href="/ArchivedArticles/" class="nav-link">
  Old Articles
</a></div><div class="nav-item"><a href="/Building-a-Database-Application-in-Blazor/" class="nav-link router-link-active">
  Database Application
</a></div><div class="nav-item"><a href="https://cec-blazor-examples.azurewebsites.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demo Site
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/articles/" class="nav-link">
  Articles
</a></div><div class="nav-item"><a href="/posts/" class="nav-link">
  Posts
</a></div><div class="nav-item"><a href="/ArchivedArticles/" class="nav-link">
  Old Articles
</a></div><div class="nav-item"><a href="/Building-a-Database-Application-in-Blazor/" class="nav-link router-link-active">
  Database Application
</a></div><div class="nav-item"><a href="https://cec-blazor-examples.azurewebsites.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Demo Site
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Blazor Database Application</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Building-a-Database-Application-in-Blazor/" aria-current="page" class="sidebar-link">Building a Database Application in Blazor</a></li><li><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-1.html" class="sidebar-link">A Blazor Database Template - Project Structure and Framework</a></li><li><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-2.html" class="sidebar-link">Part 2 - Building the Services</a></li><li><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-3.html" class="sidebar-link">Part 3 - Building Edit and View UI Components</a></li><li><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-4.html" class="sidebar-link">Part 3 - UI Components</a></li><li><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-5.html" class="sidebar-link">Part 5 - View Components - CRUD List Operations in the UI</a></li><li><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-6.html" aria-current="page" class="active sidebar-link">Part 6 - Adding new Record Types and Their UI to the Weather Application</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-6.html#sample-project-and-code" class="sidebar-link">Sample Project and Code</a></li><li class="sidebar-sub-header"><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-6.html#overview-of-the-process" class="sidebar-link">Overview of the Process</a></li><li class="sidebar-sub-header"><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-6.html#database" class="sidebar-link">Database</a></li><li class="sidebar-sub-header"><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-6.html#cec-weather-library" class="sidebar-link">CEC.Weather Library</a></li><li class="sidebar-sub-header"><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-6.html#forms" class="sidebar-link">Forms</a></li><li class="sidebar-sub-header"><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-6.html#cec-blazor-server" class="sidebar-link">CEC.Blazor.Server</a></li><li class="sidebar-sub-header"><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-6.html#cec-blazor-wasm-client" class="sidebar-link">CEC.Blazor.WASM.Client</a></li><li class="sidebar-sub-header"><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-6.html#cec-blazor-wasm-server" class="sidebar-link">CEC.Blazor.WASM.Server</a></li><li class="sidebar-sub-header"><a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-6.html#history" class="sidebar-link">History</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="part-6-adding-new-record-types-and-their-ui-to-the-weather-application"><a href="#part-6-adding-new-record-types-and-their-ui-to-the-weather-application" class="header-anchor">#</a> Part 6 - Adding new Record Types and Their UI to the Weather Application</h1> <div class="custom-block danger"><p class="custom-block-title">WARNING</p> <p>This article and all the others in this series is a building site.  Total revamp.  See CodeProject for the most recent released version which is very out-of-date</p></div> <p>This is the sixth article in the series and walks through adding new records to the Weather Application.  The articles so far are:</p> <ol><li>Project Structure and Framework.</li> <li>Services - Building the CRUD Data Layers.</li> <li>View Components - CRUD Edit and View Operations in the UI.</li> <li>UI Components - Building HTML/CSS Controls.</li> <li>View Components - CRUD List Operations in the UI.</li> <li>A walk through detailing how to add weather stations and weather station data to the application.</li></ol> <p>The purpose of the exercise is to import station data from the UK Met Office.  There's an command line importer project included in the solution to fetch and import the data - review the code to see how it works.  The data is in the form of monthly records from British Weather Stations going back to 1928.  We'll add two record types:</p> <ul><li>Weather Station</li> <li>Weather Report from Stations</li></ul> <p>And all the infrastructure to provide UI CRUD operations for these two records.</p> <p>As we're building both Server and WASM deployments, we have 4 projects to which we add code:</p> <ol><li><strong>CEC.Weather</strong> - the shared project library</li> <li><strong>CEC.Blazor.Server</strong> - the Server Project</li> <li><strong>CEC.Blazor.WASM.Client</strong> - the WASM project</li> <li><strong>CEC.Blazor.WASM.Server</strong> - the API server for the WASM project</li></ol> <p>The majority of code is library code in CEC.Blazor.SPA.</p> <h2 id="sample-project-and-code"><a href="#sample-project-and-code" class="header-anchor">#</a> Sample Project and Code</h2> <p>The repository for the articles has moved to <a href="https://github.com/ShaunCurtis/CEC.Blazor.SPA" target="_blank" rel="noopener noreferrer">CEC.Blazor.SPA Repository<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.  <a href="https://github.com/ShaunCurtis/CEC.Blazor" target="_blank" rel="noopener noreferrer">CEC.Blazor GitHub Repository<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is obselete and will be removed.</p> <p><a href="https://cec-blazor-server.azurewebsites.net/" target="_blank" rel="noopener noreferrer">You can see the Server and WASM versions of the project running here on the same site<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="overview-of-the-process"><a href="#overview-of-the-process" class="header-anchor">#</a> Overview of the Process</h2> <ol><li>Add the Tables to the Database.</li> <li>Add the DbContext, Data Classes and Controller Services and Forms to the Blazor.Database Library</li> <li>Add the Forms and View Components to the Blazor.Database Library</li> <li>Add the RouteViews and configure the Services in the Blazor.Database.Server project.</li> <li>Add the RouteViews and configure the Services in the Blazor.Database.WASM project.</li> <li>Add the Controllers and configure the Services in the Blazor.Database.Web project.</li></ol> <h2 id="database"><a href="#database" class="header-anchor">#</a> Database</h2> <p>Add tables for each record type to the database.</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">[</span>dbo<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>WeatherStation<span class="token punctuation">]</span><span class="token punctuation">(</span>
	<span class="token punctuation">[</span>WeatherStationID<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">int</span><span class="token punctuation">]</span> <span class="token keyword">IDENTITY</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span>Name<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">varchar</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span>Latitude<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">decimal</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span>Longitude<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">decimal</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span>Elevation<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">decimal</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token punctuation">)</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">[</span>dbo<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">[</span>WeatherReport<span class="token punctuation">]</span><span class="token punctuation">(</span>
	<span class="token punctuation">[</span>WeatherReportID<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">int</span><span class="token punctuation">]</span> <span class="token keyword">IDENTITY</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span>WeatherStationID<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">int</span><span class="token punctuation">]</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span><span class="token keyword">Date</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>smalldatetime<span class="token punctuation">]</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span>TempMax<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">decimal</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span>TempMin<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">decimal</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span>FrostDays<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">int</span><span class="token punctuation">]</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span>Rainfall<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">decimal</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span>SunHours<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">decimal</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span>
<span class="token punctuation">)</span>
</code></pre></div><p>Add views for each record type.</p> <p>Note:</p> <ol><li>They both map <code>ID</code> and <code>DisplayName</code> to map to <code>IDbRecord</code>.</li> <li>WeatherReport maps Month and Year to allow SQL Server filtering on those fields.</li> <li>WeatherReport contains a JOIN to provide <code>WeatherStationName</code> in the record.</li></ol> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> vw_WeatherStation
<span class="token keyword">AS</span>
<span class="token keyword">SELECT</span>        
    WeatherStationID <span class="token keyword">AS</span> ID<span class="token punctuation">,</span> 
    Name<span class="token punctuation">,</span> 
    Latitude<span class="token punctuation">,</span> 
    Longitude<span class="token punctuation">,</span> 
    Elevation<span class="token punctuation">,</span> 
    Name <span class="token keyword">AS</span> DisplayName
<span class="token keyword">FROM</span> WeatherStation
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> vw_WeatherReport
<span class="token keyword">AS</span>
<span class="token keyword">SELECT</span>        
    R<span class="token punctuation">.</span>WeatherReportID <span class="token keyword">as</span> ID<span class="token punctuation">,</span> 
    R<span class="token punctuation">.</span>WeatherStationID<span class="token punctuation">,</span> 
    R<span class="token punctuation">.</span><span class="token keyword">Date</span><span class="token punctuation">,</span> 
    R<span class="token punctuation">.</span>TempMax<span class="token punctuation">,</span> 
    R<span class="token punctuation">.</span>TempMin<span class="token punctuation">,</span> 
    R<span class="token punctuation">.</span>FrostDays<span class="token punctuation">,</span> 
    R<span class="token punctuation">.</span>Rainfall<span class="token punctuation">,</span> 
    R<span class="token punctuation">.</span>SunHours<span class="token punctuation">,</span> 
    S<span class="token punctuation">.</span>Name <span class="token keyword">AS</span> WeatherStationName<span class="token punctuation">,</span> 
    <span class="token string">'Report For '</span> <span class="token operator">+</span> <span class="token keyword">CONVERT</span><span class="token punctuation">(</span><span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">Date</span><span class="token punctuation">,</span> <span class="token number">106</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> DisplayName
    <span class="token keyword">MONTH</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span><span class="token keyword">Date</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token keyword">Month</span><span class="token punctuation">,</span> 
    <span class="token keyword">YEAR</span><span class="token punctuation">(</span>R<span class="token punctuation">.</span><span class="token keyword">Date</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> <span class="token keyword">Year</span>
<span class="token keyword">FROM</span>  WeatherReport <span class="token keyword">AS</span> R 
<span class="token keyword">LEFT</span> <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> dbo<span class="token punctuation">.</span>WeatherStation <span class="token keyword">AS</span> S <span class="token keyword">ON</span> R<span class="token punctuation">.</span>WeatherStationID <span class="token operator">=</span> S<span class="token punctuation">.</span>WeatherStationID
</code></pre></div><p>Add Create/Update/Delete Stored Procedures for each record type</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> sp_Create_WeatherStation
	<span class="token variable">@ID</span> <span class="token keyword">int</span> output
    <span class="token punctuation">,</span><span class="token variable">@Name</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">,</span><span class="token variable">@Latitude</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
    <span class="token punctuation">,</span><span class="token variable">@Longitude</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
    <span class="token punctuation">,</span><span class="token variable">@Elevation</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">AS</span>
<span class="token keyword">BEGIN</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> dbo<span class="token punctuation">.</span>WeatherStation
           <span class="token punctuation">(</span><span class="token punctuation">[</span>Name<span class="token punctuation">]</span>
           <span class="token punctuation">,</span><span class="token punctuation">[</span>Latitude<span class="token punctuation">]</span>
           <span class="token punctuation">,</span><span class="token punctuation">[</span>Longitude<span class="token punctuation">]</span>
           <span class="token punctuation">,</span><span class="token punctuation">[</span>Elevation<span class="token punctuation">]</span><span class="token punctuation">)</span>
     <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token variable">@Name</span>
           <span class="token punctuation">,</span><span class="token variable">@Latitude</span>
           <span class="token punctuation">,</span><span class="token variable">@Longitude</span>
           <span class="token punctuation">,</span><span class="token variable">@Elevation</span><span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> <span class="token variable">@ID</span>  <span class="token operator">=</span> SCOPE_IDENTITY<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">END</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> sp_Update_WeatherStation
	<span class="token variable">@ID</span> <span class="token keyword">int</span>
    <span class="token punctuation">,</span><span class="token variable">@Name</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">,</span><span class="token variable">@Latitude</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
    <span class="token punctuation">,</span><span class="token variable">@Longitude</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
    <span class="token punctuation">,</span><span class="token variable">@Elevation</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">AS</span>
<span class="token keyword">BEGIN</span>
<span class="token keyword">UPDATE</span> dbo<span class="token punctuation">.</span>WeatherStation
	<span class="token keyword">SET</span> 
           <span class="token punctuation">[</span>Name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">@Name</span>
           <span class="token punctuation">,</span><span class="token punctuation">[</span>Latitude<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">@Latitude</span>
           <span class="token punctuation">,</span><span class="token punctuation">[</span>Longitude<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">@Longitude</span>
           <span class="token punctuation">,</span><span class="token punctuation">[</span>Elevation<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">@Elevation</span>
<span class="token keyword">WHERE</span> <span class="token variable">@ID</span>  <span class="token operator">=</span> WeatherStationID
<span class="token keyword">END</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> sp_Delete_WeatherStation
	<span class="token variable">@ID</span> <span class="token keyword">int</span>
<span class="token keyword">AS</span>
<span class="token keyword">BEGIN</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> WeatherStation
<span class="token keyword">WHERE</span> <span class="token variable">@ID</span>  <span class="token operator">=</span> WeatherStationID
<span class="token keyword">END</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> sp_Create_WeatherReport
	<span class="token variable">@ID</span> <span class="token keyword">int</span> output
    <span class="token punctuation">,</span><span class="token variable">@WeatherStationID</span> <span class="token keyword">int</span>
    <span class="token punctuation">,</span><span class="token variable">@Date</span> smalldatetime
    <span class="token punctuation">,</span><span class="token variable">@TempMax</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
    <span class="token punctuation">,</span><span class="token variable">@TempMin</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
    <span class="token punctuation">,</span><span class="token variable">@FrostDays</span> <span class="token keyword">int</span>
    <span class="token punctuation">,</span><span class="token variable">@Rainfall</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
    <span class="token punctuation">,</span><span class="token variable">@SunHours</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">AS</span>
<span class="token keyword">BEGIN</span>
<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> WeatherReport
           <span class="token punctuation">(</span><span class="token punctuation">[</span>WeatherStationID<span class="token punctuation">]</span>
           <span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token keyword">Date</span><span class="token punctuation">]</span>
           <span class="token punctuation">,</span><span class="token punctuation">[</span>TempMax<span class="token punctuation">]</span>
           <span class="token punctuation">,</span><span class="token punctuation">[</span>TempMin<span class="token punctuation">]</span>
           <span class="token punctuation">,</span><span class="token punctuation">[</span>FrostDays<span class="token punctuation">]</span>
           <span class="token punctuation">,</span><span class="token punctuation">[</span>Rainfall<span class="token punctuation">]</span>
           <span class="token punctuation">,</span><span class="token punctuation">[</span>SunHours<span class="token punctuation">]</span><span class="token punctuation">)</span>
     <span class="token keyword">VALUES</span>
           <span class="token punctuation">(</span><span class="token variable">@WeatherStationID</span>
           <span class="token punctuation">,</span><span class="token variable">@Date</span>
           <span class="token punctuation">,</span><span class="token variable">@TempMax</span>
           <span class="token punctuation">,</span><span class="token variable">@TempMin</span>
           <span class="token punctuation">,</span><span class="token variable">@FrostDays</span>
           <span class="token punctuation">,</span><span class="token variable">@Rainfall</span>
           <span class="token punctuation">,</span><span class="token variable">@SunHours</span><span class="token punctuation">)</span>
<span class="token keyword">SELECT</span> <span class="token variable">@ID</span>  <span class="token operator">=</span> SCOPE_IDENTITY<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">END</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> sp_Update_WeatherReport
	<span class="token variable">@ID</span> <span class="token keyword">int</span> output
    <span class="token punctuation">,</span><span class="token variable">@WeatherStationID</span> <span class="token keyword">int</span>
    <span class="token punctuation">,</span><span class="token variable">@Date</span> smalldatetime
    <span class="token punctuation">,</span><span class="token variable">@TempMax</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
    <span class="token punctuation">,</span><span class="token variable">@TempMin</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
    <span class="token punctuation">,</span><span class="token variable">@FrostDays</span> <span class="token keyword">int</span>
    <span class="token punctuation">,</span><span class="token variable">@Rainfall</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span>
    <span class="token punctuation">,</span><span class="token variable">@SunHours</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token keyword">AS</span>
<span class="token keyword">BEGIN</span>
<span class="token keyword">UPDATE</span> WeatherReport
   <span class="token keyword">SET</span> <span class="token punctuation">[</span>WeatherStationID<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">@WeatherStationID</span>
      <span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token keyword">Date</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">@Date</span>
      <span class="token punctuation">,</span><span class="token punctuation">[</span>TempMax<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">@TempMax</span>
      <span class="token punctuation">,</span><span class="token punctuation">[</span>TempMin<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">@TempMin</span>
      <span class="token punctuation">,</span><span class="token punctuation">[</span>FrostDays<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">@FrostDays</span>
      <span class="token punctuation">,</span><span class="token punctuation">[</span>Rainfall<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">@Rainfall</span>
      <span class="token punctuation">,</span><span class="token punctuation">[</span>SunHours<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">@SunHours</span>
<span class="token keyword">WHERE</span> <span class="token variable">@ID</span>  <span class="token operator">=</span> WeatherReportID
<span class="token keyword">END</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> sp_Delete_WeatherReport
	<span class="token variable">@ID</span> <span class="token keyword">int</span>
<span class="token keyword">AS</span>
<span class="token keyword">BEGIN</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> WeatherReport
<span class="token keyword">WHERE</span> <span class="token variable">@ID</span>  <span class="token operator">=</span> WeatherReportID
<span class="token keyword">END</span>
</code></pre></div><p>All the SQL, including two weather station datasets, is available as a set of files in the SQL folder of the GitHub Repository.</p> <h2 id="cec-weather-library"><a href="#cec-weather-library" class="header-anchor">#</a> CEC.Weather Library</h2> <p>We need to:</p> <ol><li>Add the model classes for each record type.</li> <li>Add some utility classes specific to the project.  In this instance we:
<ul><li>Add some extensions to <code>decimal</code> to display our fields correctly (Latitude and Longitude).</li> <li>Add custom validators for the editors for each record type.</li></ul></li> <li>Update the WeatherForecastDBContext to handle the new record types.</li> <li>Build specific Controller and Data Services to handle each record type.</li> <li>Build specific List/Edit/View Forms for each record type.</li> <li>Update the NavMenu component.</li></ol> <h3 id="add-model-classes-for-the-records"><a href="#add-model-classes-for-the-records" class="header-anchor">#</a> Add Model Classes for the Records</h3> <p>First we need to create entries in the <code>DataDictionary</code> for our new fields.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Weather/Data/Base/DataDictionary.cs</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">DataDictionary</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Weather Forecast Fields</span>
    <span class="token range operator">..</span><span class="token range operator">..</span><span class="token range operator">..</span><span class="token punctuation">.</span>

    <span class="token comment">// Weather Station Fields</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">RecordFieldInfo</span> __WeatherStationID <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RecordFieldInfo</span><span class="token punctuation">(</span><span class="token string">&quot;WeatherStationID&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">RecordFieldInfo</span> __WeatherStationName <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RecordFieldInfo</span><span class="token punctuation">(</span><span class="token string">&quot;WeatherStationName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">RecordFieldInfo</span> __WeatherStationLatitude <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RecordFieldInfo</span><span class="token punctuation">(</span><span class="token string">&quot;WeatherStationLatitude&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">RecordFieldInfo</span> __WeatherStationLongitude <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RecordFieldInfo</span><span class="token punctuation">(</span><span class="token string">&quot;WeatherStationLongitude&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">RecordFieldInfo</span> __WeatherStationElevation <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RecordFieldInfo</span><span class="token punctuation">(</span><span class="token string">&quot;WeatherStationElevation&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Weather Report Fields</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">RecordFieldInfo</span> __WeatherReportID <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RecordFieldInfo</span><span class="token punctuation">(</span><span class="token string">&quot;WeatherReportID&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">RecordFieldInfo</span> __WeatherReportDate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RecordFieldInfo</span><span class="token punctuation">(</span><span class="token string">&quot;WeatherReportDate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">RecordFieldInfo</span> __WeatherReportTempMax <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RecordFieldInfo</span><span class="token punctuation">(</span><span class="token string">&quot;WeatherReportTempMax&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">RecordFieldInfo</span> __WeatherReportTempMin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RecordFieldInfo</span><span class="token punctuation">(</span><span class="token string">&quot;WeatherReportTempMin&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">RecordFieldInfo</span> __WeatherReportFrostDays <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RecordFieldInfo</span><span class="token punctuation">(</span><span class="token string">&quot;WeatherReportFrostDays&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">RecordFieldInfo</span> __WeatherReportRainfall <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RecordFieldInfo</span><span class="token punctuation">(</span><span class="token string">&quot;WeatherReportRainfall&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">RecordFieldInfo</span> __WeatherReportSunHours <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RecordFieldInfo</span><span class="token punctuation">(</span><span class="token string">&quot;WeatherReportSunHours&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">RecordFieldInfo</span> __WeatherReportDisplayName <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RecordFieldInfo</span><span class="token punctuation">(</span><span class="token string">&quot;WeatherReportDisplayName&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">RecordFieldInfo</span> __WeatherReportMonth <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RecordFieldInfo</span><span class="token punctuation">(</span><span class="token string">&quot;WeatherReportMonth&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">readonly</span> <span class="token class-name">RecordFieldInfo</span> __WeatherReportYear <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RecordFieldInfo</span><span class="token punctuation">(</span><span class="token string">&quot;WeatherReportYear&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Next we Build the model record</p> <ol><li>Implement IDbRecord.</li> <li>Add the SPParameter custom attribute to all the properties that map to the Stored Procedures.</li> <li>Decorate Properties that are not mapped to the Database View with <code>[Not Mapped]</code>.</li> <li>Declare the DbRecordInfo with the correct naming convention and stored procedures.</li> <li>Add the <code>AsProperties</code> property and <code>FromProperties</code> method.</li></ol> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Weather/Data/Models/DbWeatherStation.cs</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DbWeatherStation</span> 
        <span class="token punctuation">:</span><span class="token type-list"><span class="token class-name">IDbRecord<span class="token punctuation">&lt;</span>DbWeatherStation<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">NotMapped</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">Guid</span> GUID <span class="token operator">=&gt;</span> Guid<span class="token punctuation">.</span><span class="token function">NewGuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">NotMapped</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> WeatherStationID <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ID<span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SPParameter</span><span class="token attribute-arguments"><span class="token punctuation">(</span>IsID <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> DataType <span class="token operator">=</span> SqlDbType<span class="token punctuation">.</span>Int<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> ID <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SPParameter</span><span class="token attribute-arguments"><span class="token punctuation">(</span>DataType <span class="token operator">=</span> SqlDbType<span class="token punctuation">.</span>VarChar<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token string">&quot;No Name&quot;</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SPParameter</span><span class="token attribute-arguments"><span class="token punctuation">(</span>DataType <span class="token operator">=</span> SqlDbType<span class="token punctuation">.</span>Decimal<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Column</span><span class="token attribute-arguments"><span class="token punctuation">(</span>TypeName <span class="token operator">=</span><span class="token string">&quot;decimal(8,4)&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">decimal</span></span> Latitude <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SPParameter</span><span class="token attribute-arguments"><span class="token punctuation">(</span>DataType <span class="token operator">=</span> SqlDbType<span class="token punctuation">.</span>Decimal<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Column</span><span class="token attribute-arguments"><span class="token punctuation">(</span>TypeName <span class="token operator">=</span> <span class="token string">&quot;decimal(8,4)&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">decimal</span></span> Longitude <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SPParameter</span><span class="token attribute-arguments"><span class="token punctuation">(</span>DataType <span class="token operator">=</span> SqlDbType<span class="token punctuation">.</span>Decimal<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Column</span><span class="token attribute-arguments"><span class="token punctuation">(</span>TypeName <span class="token operator">=</span> <span class="token string">&quot;decimal(8,2)&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">decimal</span></span> Elevation <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> DisplayName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">NotMapped</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> LatLong <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token keyword">this</span><span class="token punctuation">.</span>Latitude<span class="token punctuation">.</span><span class="token function">AsLatitude</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token keyword">this</span><span class="token punctuation">.</span>Longitude<span class="token punctuation">.</span><span class="token function">AsLongitude</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">NotMapped</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DbRecordInfo</span> RecordInfo <span class="token operator">=&gt;</span> DbWeatherStation<span class="token punctuation">.</span>RecInfo<span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">NotMapped</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">DbRecordInfo</span> RecInfo <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DbRecordInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        CreateSP <span class="token operator">=</span> <span class="token string">&quot;sp_Create_WeatherStation&quot;</span><span class="token punctuation">,</span>
        UpdateSP <span class="token operator">=</span> <span class="token string">&quot;sp_Update_WeatherStation&quot;</span><span class="token punctuation">,</span>
        DeleteSP <span class="token operator">=</span> <span class="token string">&quot;sp_Delete_WeatherStation&quot;</span><span class="token punctuation">,</span>
        RecordDescription <span class="token operator">=</span> <span class="token string">&quot;Weather Station&quot;</span><span class="token punctuation">,</span>
        RecordName <span class="token operator">=</span> <span class="token string">&quot;WeatherStation&quot;</span><span class="token punctuation">,</span>
        RecordListDescription <span class="token operator">=</span> <span class="token string">&quot;Weather Stations&quot;</span><span class="token punctuation">,</span>
        RecordListName <span class="token operator">=</span> <span class="token string">&quot;WeatherStations&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">RecordCollection</span> <span class="token function">AsProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RecordCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token punctuation">{</span> DataDictionary<span class="token punctuation">.</span>__WeatherStationID<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ID <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> DataDictionary<span class="token punctuation">.</span>__WeatherStationName<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Name <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> DataDictionary<span class="token punctuation">.</span>__WeatherStationLatitude<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Latitude <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> DataDictionary<span class="token punctuation">.</span>__WeatherStationLongitude<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Longitude <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> DataDictionary<span class="token punctuation">.</span>__WeatherStationElevation<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Elevation <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">DbWeatherStation</span> <span class="token function">FromProperties</span><span class="token punctuation">(</span><span class="token class-name">RecordCollection</span> recordvalues<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DbWeatherStation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            ID <span class="token operator">=</span> recordvalues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherStationID<span class="token punctuation">)</span><span class="token punctuation">,</span>
            Name <span class="token operator">=</span> recordvalues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherStationName<span class="token punctuation">)</span><span class="token punctuation">,</span>
            Latitude <span class="token operator">=</span> recordvalues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">decimal</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherStationLatitude<span class="token punctuation">)</span><span class="token punctuation">,</span>
            Longitude <span class="token operator">=</span> recordvalues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">decimal</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherStationLongitude<span class="token punctuation">)</span><span class="token punctuation">,</span>
            Elevation <span class="token operator">=</span> recordvalues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">decimal</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherStationElevation<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">DbWeatherStation</span> <span class="token function">GetFromProperties</span><span class="token punctuation">(</span><span class="token class-name">RecordCollection</span> recordvalues<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> DbWeatherStation<span class="token punctuation">.</span><span class="token function">FromProperties</span><span class="token punctuation">(</span>recordvalues<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Weather/Data/Models/DbWeatherReport.cs</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DbWeatherReport</span> <span class="token punctuation">:</span><span class="token type-list"><span class="token class-name">IDbRecord<span class="token punctuation">&lt;</span>DbWeatherReport<span class="token punctuation">&gt;</span></span></span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">NotMapped</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">Guid</span> GUID <span class="token operator">=&gt;</span> Guid<span class="token punctuation">.</span><span class="token function">NewGuid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">NotMapped</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> WeatherReportID <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ID<span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SPParameter</span><span class="token attribute-arguments"><span class="token punctuation">(</span>IsID <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> DataType <span class="token operator">=</span> SqlDbType<span class="token punctuation">.</span>Int<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> ID <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SPParameter</span><span class="token attribute-arguments"><span class="token punctuation">(</span>DataType <span class="token operator">=</span> SqlDbType<span class="token punctuation">.</span>Int<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> WeatherStationID <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SPParameter</span><span class="token attribute-arguments"><span class="token punctuation">(</span>DataType <span class="token operator">=</span> SqlDbType<span class="token punctuation">.</span>SmallDateTime<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DateTime</span> Date <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> DateTime<span class="token punctuation">.</span>Now<span class="token punctuation">.</span>Date<span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SPParameter</span><span class="token attribute-arguments"><span class="token punctuation">(</span>DataType <span class="token operator">=</span> SqlDbType<span class="token punctuation">.</span>Decimal<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Column</span><span class="token attribute-arguments"><span class="token punctuation">(</span>TypeName <span class="token operator">=</span> <span class="token string">&quot;decimal(8,4)&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">decimal</span></span> TempMax <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SPParameter</span><span class="token attribute-arguments"><span class="token punctuation">(</span>DataType <span class="token operator">=</span> SqlDbType<span class="token punctuation">.</span>Decimal<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Column</span><span class="token attribute-arguments"><span class="token punctuation">(</span>TypeName <span class="token operator">=</span> <span class="token string">&quot;decimal(8,4)&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">decimal</span></span> TempMin <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SPParameter</span><span class="token attribute-arguments"><span class="token punctuation">(</span>DataType <span class="token operator">=</span> SqlDbType<span class="token punctuation">.</span>Int<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> FrostDays <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SPParameter</span><span class="token attribute-arguments"><span class="token punctuation">(</span>DataType <span class="token operator">=</span> SqlDbType<span class="token punctuation">.</span>Decimal<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Column</span><span class="token attribute-arguments"><span class="token punctuation">(</span>TypeName <span class="token operator">=</span> <span class="token string">&quot;decimal(8,4)&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">decimal</span></span> Rainfall <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">SPParameter</span><span class="token attribute-arguments"><span class="token punctuation">(</span>DataType <span class="token operator">=</span> SqlDbType<span class="token punctuation">.</span>Decimal<span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Column</span><span class="token attribute-arguments"><span class="token punctuation">(</span>TypeName <span class="token operator">=</span> <span class="token string">&quot;decimal(8,2)&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">decimal</span></span> SunHours <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> DisplayName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> WeatherStationName <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Month <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Year <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">NotMapped</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">DbRecordInfo</span> RecordInfo <span class="token operator">=&gt;</span> DbWeatherReport<span class="token punctuation">.</span>RecInfo<span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">NotMapped</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> MonthName <span class="token operator">=&gt;</span> CultureInfo<span class="token punctuation">.</span>CurrentCulture<span class="token punctuation">.</span>DateTimeFormat<span class="token punctuation">.</span><span class="token function">GetMonthName</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>Month<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">NotMapped</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> MonthYearName <span class="token operator">=&gt;</span> <span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token keyword">this</span><span class="token punctuation">.</span>MonthName</span><span class="token punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token keyword">this</span><span class="token punctuation">.</span>Year</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">;</span>


    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">NotMapped</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">DbRecordInfo</span> RecInfo <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DbRecordInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        CreateSP <span class="token operator">=</span> <span class="token string">&quot;sp_Create_WeatherReport&quot;</span><span class="token punctuation">,</span>
        UpdateSP <span class="token operator">=</span> <span class="token string">&quot;sp_Update_WeatherReport&quot;</span><span class="token punctuation">,</span>
        DeleteSP <span class="token operator">=</span> <span class="token string">&quot;sp_Delete_WeatherReport&quot;</span><span class="token punctuation">,</span>
        RecordDescription <span class="token operator">=</span> <span class="token string">&quot;Weather Report&quot;</span><span class="token punctuation">,</span>
        RecordName <span class="token operator">=</span> <span class="token string">&quot;WeatherReport&quot;</span><span class="token punctuation">,</span>
        RecordListDescription <span class="token operator">=</span> <span class="token string">&quot;Weather Reports&quot;</span><span class="token punctuation">,</span>
        RecordListName <span class="token operator">=</span> <span class="token string">&quot;WeatherReports&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">RecordCollection</span> <span class="token function">AsProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">RecordCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token punctuation">{</span> DataDictionary<span class="token punctuation">.</span>__WeatherReportID<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ID <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> DataDictionary<span class="token punctuation">.</span>__WeatherReportDate<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Date <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> DataDictionary<span class="token punctuation">.</span>__WeatherReportTempMax<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>TempMax <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> DataDictionary<span class="token punctuation">.</span>__WeatherReportTempMin<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>TempMin <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> DataDictionary<span class="token punctuation">.</span>__WeatherReportFrostDays<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>FrostDays <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> DataDictionary<span class="token punctuation">.</span>__WeatherReportRainfall<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Rainfall <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> DataDictionary<span class="token punctuation">.</span>__WeatherReportSunHours<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>SunHours <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> DataDictionary<span class="token punctuation">.</span>__WeatherReportDisplayName<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>DisplayName <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> DataDictionary<span class="token punctuation">.</span>__WeatherStationID<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>WeatherStationID <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> DataDictionary<span class="token punctuation">.</span>__WeatherStationName<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>WeatherStationName <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> DataDictionary<span class="token punctuation">.</span>__WeatherReportMonth<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Month <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span> DataDictionary<span class="token punctuation">.</span>__WeatherReportYear<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Year <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">DbWeatherReport</span> <span class="token function">FromProperties</span><span class="token punctuation">(</span><span class="token class-name">RecordCollection</span> recordvalues<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token keyword">new</span> <span class="token constructor-invocation class-name">DbWeatherReport</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            ID <span class="token operator">=</span> recordvalues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportID<span class="token punctuation">)</span><span class="token punctuation">,</span>
            Date <span class="token operator">=</span> recordvalues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DateTime<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportDate<span class="token punctuation">)</span><span class="token punctuation">,</span>
            TempMax <span class="token operator">=</span> recordvalues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">decimal</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportTempMax<span class="token punctuation">)</span><span class="token punctuation">,</span>
            TempMin <span class="token operator">=</span> recordvalues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">decimal</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportTempMin<span class="token punctuation">)</span><span class="token punctuation">,</span>
            FrostDays <span class="token operator">=</span> recordvalues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportFrostDays<span class="token punctuation">)</span><span class="token punctuation">,</span>
            Rainfall <span class="token operator">=</span> recordvalues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">decimal</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportRainfall<span class="token punctuation">)</span><span class="token punctuation">,</span>
            SunHours <span class="token operator">=</span> recordvalues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">decimal</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportSunHours<span class="token punctuation">)</span><span class="token punctuation">,</span>
            DisplayName <span class="token operator">=</span> recordvalues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportDisplayName<span class="token punctuation">)</span><span class="token punctuation">,</span>
            WeatherStationID <span class="token operator">=</span> recordvalues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherStationID<span class="token punctuation">)</span><span class="token punctuation">,</span>
            WeatherStationName <span class="token operator">=</span> recordvalues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherStationName<span class="token punctuation">)</span><span class="token punctuation">,</span>
            Month <span class="token operator">=</span> recordvalues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportMonth<span class="token punctuation">)</span><span class="token punctuation">,</span>
            Year <span class="token operator">=</span> recordvalues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportYear<span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">DbWeatherReport</span> <span class="token function">GetFromProperties</span><span class="token punctuation">(</span><span class="token class-name">RecordCollection</span> recordvalues<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> DbWeatherReport<span class="token punctuation">.</span><span class="token function">FromProperties</span><span class="token punctuation">(</span>recordvalues<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><h3 id="add-some-utility-classes"><a href="#add-some-utility-classes" class="header-anchor">#</a> Add Some Utility Classes</h3> <p>Make life easier: extension methods are great for this. Longitudes and Latitudes are handled as decimals, but we need to present them a little differently in the UI.  We use decimal extension methods to do this.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Weather/Extensions/DecimalExtensions.cs</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">DecimalExtensions</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">AsLatitude</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name"><span class="token keyword">decimal</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span>  <span class="token operator">=&gt;</span> <span class="token keyword">value</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">?</span> <span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token keyword">value</span></span><span class="token punctuation">}</span></span><span class="token string">N&quot;</span></span> <span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">Math<span class="token punctuation">.</span><span class="token function">Abs</span><span class="token punctuation">(</span><span class="token keyword">value</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string">S&quot;</span></span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> <span class="token function">AsLongitude</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name"><span class="token keyword">decimal</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">value</span> <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">?</span> <span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp"><span class="token keyword">value</span></span><span class="token punctuation">}</span></span><span class="token string">E&quot;</span></span> <span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">$&quot;</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token expression language-csharp">Math<span class="token punctuation">.</span><span class="token function">Abs</span><span class="token punctuation">(</span><span class="token keyword">value</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></span><span class="token string">W&quot;</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="recordeditcontexts"><a href="#recordeditcontexts" class="header-anchor">#</a> RecordEditContexts</h3> <p>Build a RecordEditContext for each model</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Weather/Data/EditModels/WeatherReportEditContext.cs</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WeatherReportEditContext</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">RecordEditContext</span><span class="token punctuation">,</span> <span class="token class-name">IRecordEditContext</span></span>
<span class="token punctuation">{</span>
    <span class="token preprocessor property">#<span class="token directive keyword">region</span> Public</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">DateTime</span> WeatherReportDate
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>RecordValues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DateTime<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportDate<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">set</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>RecordValues<span class="token punctuation">.</span><span class="token function">SetField</span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportDate<span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">decimal</span></span> WeatherReportTempMax
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>RecordValues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">decimal</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportTempMax<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">set</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>RecordValues<span class="token punctuation">.</span><span class="token function">SetField</span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportTempMax<span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">decimal</span></span> WeatherReportTempMin
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>RecordValues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">decimal</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportTempMin<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">set</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>RecordValues<span class="token punctuation">.</span><span class="token function">SetField</span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportTempMin<span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> WeatherReportFrostDays
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>RecordValues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportFrostDays<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">set</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>RecordValues<span class="token punctuation">.</span><span class="token function">SetField</span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportFrostDays<span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">decimal</span></span> WeatherReportRainfall
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>RecordValues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">decimal</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportRainfall<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">set</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>RecordValues<span class="token punctuation">.</span><span class="token function">SetField</span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportRainfall<span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">decimal</span></span> WeatherReportSunHours
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>RecordValues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">decimal</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportSunHours<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">set</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>RecordValues<span class="token punctuation">.</span><span class="token function">SetField</span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportSunHours<span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> WeatherStationID
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>RecordValues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherStationID<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">set</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>RecordValues<span class="token punctuation">.</span><span class="token function">SetField</span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherStationID<span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> WeatherReportID
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>RecordValues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">bool</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportID<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token function">WeatherReportEditContext</span><span class="token punctuation">(</span><span class="token class-name">RecordCollection</span> collection<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>collection<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>

    <span class="token preprocessor property">#<span class="token directive keyword">region</span> Protected</span>

    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">LoadValidationActions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">LoadValidationActions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>ValidationActions<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>ValidateTempMax<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>ValidationActions<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>ValidateTempMin<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>ValidationActions<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>ValidateDate<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>ValidationActions<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>ValidateFrostDays<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>ValidationActions<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>ValidateRainfall<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>ValidationActions<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>ValidateSunHours<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token preprocessor property">#<span class="token directive keyword">endregion</span></span>

    <span class="token preprocessor property">#<span class="token directive keyword">region</span> Private</span>

    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">ValidateDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>WeatherReportDate<span class="token punctuation">.</span><span class="token function">Validation</span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportDate<span class="token punctuation">.</span>FieldName<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> ValidationMessageStore<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">NotDefault</span><span class="token punctuation">(</span><span class="token string">&quot;You must select a date&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">ValidateTempMax</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>WeatherReportTempMax<span class="token punctuation">.</span><span class="token function">Validation</span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportTempMax<span class="token punctuation">.</span>FieldName<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> ValidationMessageStore<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">LessThan</span><span class="token punctuation">(</span><span class="token number">70</span><span class="token punctuation">,</span> <span class="token string">&quot;The temperature must be less than 70C&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">GreaterThan</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token string">&quot;The temperature must be greater than -60C&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">ValidateTempMin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>WeatherReportTempMin<span class="token punctuation">.</span><span class="token function">Validation</span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportTempMin<span class="token punctuation">.</span>FieldName<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> ValidationMessageStore<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">LessThan</span><span class="token punctuation">(</span><span class="token number">70</span><span class="token punctuation">,</span> <span class="token string">&quot;The temperature must be less than 70C&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">GreaterThan</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token string">&quot;The temperature must be greater than -60C&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">ValidateFrostDays</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>WeatherReportTempMin<span class="token punctuation">.</span><span class="token function">Validation</span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportFrostDays<span class="token punctuation">.</span>FieldName<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> ValidationMessageStore<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">LessThan</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">GreaterThan</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token string">&quot;There are between 0 and 31 frost days in a month&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">ValidateRainfall</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>WeatherReportRainfall<span class="token punctuation">.</span><span class="token function">Validation</span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportRainfall<span class="token punctuation">.</span>FieldName<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> ValidationMessageStore<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">GreaterThanOrEqualTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;Rainfall can't be a negative amount&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">ValidateSunHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>WeatherReportSunHours<span class="token punctuation">.</span><span class="token function">Validation</span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherReportSunHours<span class="token punctuation">.</span>FieldName<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> ValidationMessageStore<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">GreaterThanOrEqualTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;Sun hours per month can't be a negative amount&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Weather/Data/EditModels/WeatherStationEditContext.cs</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WeatherStationEditContext</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">RecordEditContext</span><span class="token punctuation">,</span> <span class="token class-name">IRecordEditContext</span></span>
<span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> WeatherStationName
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>RecordValues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherStationName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">set</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>RecordValues<span class="token punctuation">.</span><span class="token function">SetField</span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherStationName<span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">decimal</span></span> WeatherStationLatitude
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>RecordValues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">decimal</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherStationLatitude<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">set</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>RecordValues<span class="token punctuation">.</span><span class="token function">SetField</span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherStationLatitude<span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">decimal</span></span> WeatherStationLongitude
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>RecordValues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">decimal</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherStationLongitude<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">set</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>RecordValues<span class="token punctuation">.</span><span class="token function">SetField</span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherStationLongitude<span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">decimal</span></span> WeatherStationElevation
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>RecordValues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">decimal</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherStationElevation<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">set</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>RecordValues<span class="token punctuation">.</span><span class="token function">SetField</span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherStationElevation<span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> WeatherStationID 
        <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>RecordValues<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEditValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherStationID<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">WeatherStationEditContext</span><span class="token punctuation">(</span><span class="token class-name">RecordCollection</span> collection<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>collection<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">LoadValidationActions</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">LoadValidationActions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>ValidationActions<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>ValidateName<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>ValidationActions<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>ValidateLatitude<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>ValidationActions<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>ValidateLongitude<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>ValidationActions<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>ValidateElevation<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">ValidateName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>WeatherStationName<span class="token punctuation">.</span><span class="token function">Validation</span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherStationName<span class="token punctuation">.</span>FieldName<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> ValidationMessageStore<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">LongerThan</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token string">&quot;Name must be longer than 6 letters&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">ValidateLatitude</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>WeatherStationLatitude<span class="token punctuation">.</span><span class="token function">Validation</span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherStationLatitude<span class="token punctuation">.</span>FieldName<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> ValidationMessageStore<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">GreaterThanOrEqualTo</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">90</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">LessThanOrEqualTo</span><span class="token punctuation">(</span><span class="token number">90</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token string">&quot;Latitude should be in the range -90 to 90&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">ValidateLongitude</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>WeatherStationLongitude<span class="token punctuation">.</span><span class="token function">Validation</span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherStationLongitude<span class="token punctuation">.</span>FieldName<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> ValidationMessageStore<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">GreaterThanOrEqualTo</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">180</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">LessThanOrEqualTo</span><span class="token punctuation">(</span><span class="token number">180</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token string">&quot;Longitude should be in the range -180 to 180&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">ValidateElevation</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>WeatherStationElevation<span class="token punctuation">.</span><span class="token function">Validation</span><span class="token punctuation">(</span>DataDictionary<span class="token punctuation">.</span>__WeatherStationElevation<span class="token punctuation">.</span>FieldName<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">,</span> ValidationMessageStore<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">GreaterThanOrEqualTo</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1000</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">LessThanOrEqualTo</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">Validate</span><span class="token punctuation">(</span><span class="token string">&quot;Elevation should be in the range -1000 to 10000&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="update-weatherforecastdbcontext"><a href="#update-weatherforecastdbcontext" class="header-anchor">#</a> Update WeatherForecastDbContext</h3> <p>Add two new <code>DbSet</code> properties to the class and two <code>modelBuilder</code> calls to <code>OnModelCreating</code>.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Weather/Data/WeatherForecastDbContext.cs</span>
<span class="token range operator">..</span><span class="token range operator">..</span><span class="token range operator">..</span>

<span class="token keyword">public</span> <span class="token return-type class-name">DbSet<span class="token punctuation">&lt;</span>DbWeatherStation<span class="token punctuation">&gt;</span></span> WeatherStation <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token return-type class-name">DbSet<span class="token punctuation">&lt;</span>DbWeatherReport<span class="token punctuation">&gt;</span></span> WeatherReport <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

<span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnModelCreating</span><span class="token punctuation">(</span><span class="token class-name">ModelBuilder</span> modelBuilder<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
<span class="token range operator">..</span><span class="token range operator">..</span><span class="token range operator">..</span>
    modelBuilder
        <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Entity</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DbWeatherStation<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>eb <span class="token operator">=&gt;</span>
        <span class="token punctuation">{</span>
            eb<span class="token punctuation">.</span><span class="token function">HasNoKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            eb<span class="token punctuation">.</span><span class="token function">ToView</span><span class="token punctuation">(</span><span class="token string">&quot;vw_WeatherStation&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    modelBuilder
        <span class="token punctuation">.</span><span class="token generic-method"><span class="token function">Entity</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DbWeatherReport<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>eb <span class="token operator">=&gt;</span>
        <span class="token punctuation">{</span>
            eb<span class="token punctuation">.</span><span class="token function">HasNoKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            eb<span class="token punctuation">.</span><span class="token function">ToView</span><span class="token punctuation">(</span><span class="token string">&quot;vw_WeatherReport&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="add-controller-services"><a href="#add-controller-services" class="header-anchor">#</a> Add Controller Services</h3> <p>We only show the Weather Station Services code here - the Weather Report Services are identical.</p> <p>Add the Server Data Services.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Weather/Services/ControllerServices/WeatherStationServerControllerService.cs</span>
<span class="token keyword">using</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Data</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Blazor<span class="token punctuation">.</span>Services</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Blazor<span class="token punctuation">.</span>Utilities</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Components</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>Extensions<span class="token punctuation">.</span>Configuration</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Services</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WeatherStationControllerService</span> <span class="token punctuation">:</span> 
        <span class="token type-list"><span class="token class-name">FactoryControllerService<span class="token punctuation">&lt;</span>DbWeatherStation<span class="token punctuation">,</span> WeatherForecastDbContext<span class="token punctuation">&gt;</span></span></span>
    <span class="token punctuation">{</span>

        <span class="token comment">/// &lt;summary&gt;</span>
        <span class="token comment">/// List of Outlooks for Select Controls</span>
        <span class="token comment">/// &lt;/summary&gt;</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">SortedDictionary<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> OutlookOptionList <span class="token operator">=&gt;</span> Utils<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetEnumList</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>WeatherOutlook<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token function">WeatherStationControllerService</span><span class="token punctuation">(</span><span class="token class-name">NavigationManager</span> navmanager<span class="token punctuation">,</span> <span class="token class-name">IConfiguration</span> appconfiguration<span class="token punctuation">,</span> <span class="token class-name">IFactoryDataService<span class="token punctuation">&lt;</span>WeatherForecastDbContext<span class="token punctuation">&gt;</span></span> dataService<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">base</span><span class="token punctuation">(</span>appconfiguration<span class="token punctuation">,</span> navmanager<span class="token punctuation">,</span> dataService<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="forms"><a href="#forms" class="header-anchor">#</a> Forms</h2> <p>The forms rely heavily on the boilerplate code in their respective base classes.  The code pages are relatively simple, while the razor markup pages contain the record specific UI information.</p> <h3 id="weatherstation-viewer-form"><a href="#weatherstation-viewer-form" class="header-anchor">#</a> WeatherStation Viewer Form</h3> <p>The code behind page is trivial - everything is handled by the boilerplate code in <code>RecordComponentBase</code>.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Weather/Components/Forms/WeatherStationViewerForm.razor.cs</span>
<span class="token keyword">using</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Blazor<span class="token punctuation">.</span>SPA<span class="token punctuation">.</span>Components<span class="token punctuation">.</span>Forms</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Data</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Services</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Components</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Threading<span class="token punctuation">.</span>Tasks</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Components</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">WeatherStationViewerForm</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">RecordFormBase<span class="token punctuation">&lt;</span>DbWeatherStation<span class="token punctuation">,</span> WeatherForecastDbContext<span class="token punctuation">&gt;</span></span></span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Inject</span></span><span class="token punctuation">]</span>
        <span class="token keyword">private</span> <span class="token return-type class-name">WeatherStationControllerService</span> ControllerService <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name">Task</span> <span class="token function">OnRenderAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">bool</span></span> firstRender<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>firstRender<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Service <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ControllerService<span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">OnRenderAsync</span><span class="token punctuation">(</span>firstRender<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>The razor page builds out the UI controls for displaying the record fields.  Note that we have to use <code>@using</code> statements in the markup as this is a library file with no <code>_Imports.Razor</code>.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Weather/Components/Forms/WeatherStationViewerForm.razor</span>

@inherits RecordFormBase<span class="token operator">&lt;</span>DbWeatherStation<span class="token punctuation">,</span> WeatherForecastDbContext<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>UICard<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Header<span class="token operator">&gt;</span>
        @<span class="token keyword">this</span><span class="token punctuation">.</span>PageTitle
    <span class="token operator">&lt;</span><span class="token operator">/</span>Header<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Body<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token class-name">UIErrorHandler</span> IsError<span class="token operator">=</span><span class="token string">&quot;this.IsError&quot;</span> IsLoading<span class="token operator">=</span><span class="token string">&quot;this.Loading&quot;</span> ErrorMessage<span class="token operator">=</span><span class="token string">&quot;@this.RecordErrorMessage&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>UIContainer<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>UIFormRow<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token class-name">UILabelColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;2&quot;</span><span class="token operator">&gt;</span>
                        ID
                    <span class="token operator">&lt;</span><span class="token operator">/</span>UILabelColumn<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token class-name">UIColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;2&quot;</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token class-name">InputReadOnlyText</span> Value<span class="token operator">=</span><span class="token string">&quot;@this.Service.Record.ID.ToString()&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>InputReadOnlyText<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>UIColumn<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token class-name">UILabelColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;2&quot;</span><span class="token operator">&gt;</span>
                        Name
                    <span class="token operator">&lt;</span><span class="token operator">/</span>UILabelColumn<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token class-name">UIColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;6&quot;</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token class-name">InputReadOnlyText</span> Value<span class="token operator">=</span><span class="token string">&quot;@this.Service.Record.Name&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>InputReadOnlyText<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>UIColumn<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>UIFormRow<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>UIFormRow<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token class-name">UILabelColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;2&quot;</span><span class="token operator">&gt;</span>
                        Latitude<span class="token operator">/</span>Longitude
                    <span class="token operator">&lt;</span><span class="token operator">/</span>UILabelColumn<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token class-name">UIColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;2&quot;</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token class-name">InputReadOnlyText</span> Value<span class="token operator">=</span><span class="token string">&quot;@this.Service.Record.LatLong&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>InputReadOnlyText<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>UIColumn<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token class-name">UILabelColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;2&quot;</span><span class="token operator">&gt;</span>
                        Elevation <span class="token punctuation">(</span>m<span class="token punctuation">)</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>UILabelColumn<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token class-name">UIColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;2&quot;</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token class-name">InputReadOnlyText</span> Value<span class="token operator">=</span><span class="token string">&quot;@this.Service.Record.Elevation.ToString()&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>InputReadOnlyText<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>UIColumn<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token class-name">UIColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;2&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>UIColumn<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>UIFormRow<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>UIContainer<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>UIErrorHandler<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>UIContainer<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>UIRow<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token class-name">UIColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;6&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>UIColumn<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token class-name">UIButtonColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;6&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token class-name">UIButton</span> Show<span class="token operator">=</span><span class="token string">&quot;true&quot;</span> ColourCode<span class="token operator">=</span><span class="token string">&quot;Bootstrap.ColourCode.nav&quot;</span> ClickEvent<span class="token operator">=</span><span class="token string">&quot;(e =&gt; this.Exit())&quot;</span><span class="token operator">&gt;</span>
                        Exit
                    <span class="token operator">&lt;</span><span class="token operator">/</span>UIButton<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>UIButtonColumn<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>UIRow<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>UIContainer<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>UICard<span class="token operator">&gt;</span>
</code></pre></div><h3 id="weatherstation-editor-form"><a href="#weatherstation-editor-form" class="header-anchor">#</a> WeatherStation Editor Form</h3> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Weather/Components/Forms/WeatherStationEditorForm.razor.cs</span>

<span class="token keyword">using</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Blazor<span class="token punctuation">.</span>SPA<span class="token punctuation">.</span>Components<span class="token punctuation">.</span>Forms</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Data</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Services</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Components</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Threading<span class="token punctuation">.</span>Tasks</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Components</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">WeatherStationEditorForm</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">EditRecordFormBase<span class="token punctuation">&lt;</span>DbWeatherStation<span class="token punctuation">,</span> WeatherForecastDbContext<span class="token punctuation">&gt;</span></span></span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Inject</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">WeatherStationControllerService</span> ControllerService <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
        <span class="token keyword">private</span> <span class="token return-type class-name">WeatherStationEditContext</span> EditorContext <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name">Task</span> <span class="token function">OnRenderAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">bool</span></span> firstRender<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// Assign the correct controller service</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>firstRender<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>Service <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ControllerService<span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>EditorContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WeatherStationEditContext</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ControllerService<span class="token punctuation">.</span>RecordValueCollection<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>RecordEditorContext <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>EditorContext<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">OnRenderAsync</span><span class="token punctuation">(</span>firstRender<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Weather/Components/Forms/WeatherStationEditorForm.razor</span>
@<span class="token keyword">namespace</span> CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Components
@inherits EditRecordFormBase<span class="token operator">&lt;</span>DbWeatherStation<span class="token punctuation">,</span> WeatherForecastDbContext<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token class-name">UICard</span> IsCollapsible<span class="token operator">=</span><span class="token string">&quot;false&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Header<span class="token operator">&gt;</span>
        @<span class="token keyword">this</span><span class="token punctuation">.</span>PageTitle
    <span class="token operator">&lt;</span><span class="token operator">/</span>Header<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Body<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token class-name">ModalEditForm</span> EditContext<span class="token operator">=</span><span class="token string">&quot;this.EditContext&quot;</span> IsError<span class="token operator">=</span><span class="token string">&quot;this.IsError&quot;</span> IsLoaded<span class="token operator">=</span><span class="token string">&quot;this.IsLoaded&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>ErrorContent<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>UIContainer<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>UIRow<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span>UIColumn<span class="token operator">&gt;</span>
                            @<span class="token keyword">this</span><span class="token punctuation">.</span>RecordErrorMessage
                        <span class="token operator">&lt;</span><span class="token operator">/</span>UIColumn<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>UIRow<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>UIContainer<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>ErrorContent<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>LoadingContent<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>UILoading <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>LoadingContent<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>EditorContent<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>UIContainer<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>UIFormRow<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token class-name">UILabelColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;4&quot;</span><span class="token operator">&gt;</span>
                            <span class="token class-name">Record</span> ID<span class="token punctuation">:</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>UILabelColumn<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token class-name">UIColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;2&quot;</span><span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span><span class="token class-name">InputReadOnlyText</span> Value<span class="token operator">=</span><span class="token string">&quot;@this.EditorContext.WeatherStationID.ToString()&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>InputReadOnlyText<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>UIColumn<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>UIFormRow<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>UIFormRow<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token class-name">UILabelColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;4&quot;</span><span class="token operator">&gt;</span>
                            Name<span class="token punctuation">:</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>UILabelColumn<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token class-name">UIColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;4&quot;</span><span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span>InputText <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;form-control&quot;</span> @bind<span class="token operator">-</span>Value<span class="token operator">=</span><span class="token string">&quot;this.EditorContext.WeatherStationName&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>InputText<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>UIColumn<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token class-name">UIColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;4&quot;</span><span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span><span class="token class-name">ValidationMessage</span> For<span class="token operator">=</span>@<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>EditorContext<span class="token punctuation">.</span>WeatherStationName<span class="token punctuation">)</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>UIColumn<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>UIFormRow<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>UIFormRow<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token class-name">UILabelColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;4&quot;</span><span class="token operator">&gt;</span>
                            Latitude
                        <span class="token operator">&lt;</span><span class="token operator">/</span>UILabelColumn<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token class-name">UIColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;2&quot;</span><span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span>InputNumber <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;form-control&quot;</span> @bind<span class="token operator">-</span>Value<span class="token operator">=</span><span class="token string">&quot;this.EditorContext.WeatherStationLatitude&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>InputNumber<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>UIColumn<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token class-name">UIColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;6&quot;</span><span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span><span class="token class-name">ValidationMessage</span> For<span class="token operator">=</span>@<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>EditorContext<span class="token punctuation">.</span>WeatherStationLatitude<span class="token punctuation">)</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>UIColumn<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>UIFormRow<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>UIFormRow<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token class-name">UILabelColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;4&quot;</span><span class="token operator">&gt;</span>
                            Longitude
                        <span class="token operator">&lt;</span><span class="token operator">/</span>UILabelColumn<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token class-name">UIColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;2&quot;</span><span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span>InputNumber <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;form-control&quot;</span> @bind<span class="token operator">-</span>Value<span class="token operator">=</span><span class="token string">&quot;this.EditorContext.WeatherStationLongitude&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>InputNumber<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>UIColumn<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token class-name">UIColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;6&quot;</span><span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span><span class="token class-name">ValidationMessage</span> For<span class="token operator">=</span>@<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>EditorContext<span class="token punctuation">.</span>WeatherStationLongitude<span class="token punctuation">)</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>UIColumn<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>UIFormRow<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>UIFormRow<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token class-name">UILabelColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;4&quot;</span><span class="token operator">&gt;</span>
                            Elevation
                        <span class="token operator">&lt;</span><span class="token operator">/</span>UILabelColumn<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token class-name">UIColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;2&quot;</span><span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span>InputNumber <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;form-control&quot;</span> @bind<span class="token operator">-</span>Value<span class="token operator">=</span><span class="token string">&quot;this.EditorContext.WeatherStationElevation&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>InputNumber<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>UIColumn<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token class-name">UIColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;6&quot;</span><span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span><span class="token class-name">ValidationMessage</span> For<span class="token operator">=</span>@<span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>EditorContext<span class="token punctuation">.</span>WeatherStationElevation<span class="token punctuation">)</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>UIColumn<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>UIFormRow<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>UIContainer<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>EditorContent<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>ButtonContent<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>UIContainer<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>UIRow<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token class-name">UIColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;7&quot;</span><span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span><span class="token class-name">UIAlert</span> Alert<span class="token operator">=</span><span class="token string">&quot;this.AlertMessage&quot;</span> SizeCode<span class="token operator">=</span><span class="token string">&quot;Bootstrap.SizeCode.sm&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>UIAlert<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>UIColumn<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token class-name">UIButtonColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;5&quot;</span><span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span><span class="token class-name">UIButton</span> Disabled<span class="token operator">=</span><span class="token string">&quot;!this.DisplaySave&quot;</span> ClickEvent<span class="token operator">=</span><span class="token string">&quot;this.SaveAndExit&quot;</span> ColourCode<span class="token operator">=</span><span class="token string">&quot;Bootstrap.ColourCode.save&quot;</span><span class="token operator">&gt;</span>@<span class="token keyword">this</span><span class="token punctuation">.</span>SaveButtonText <span class="token operator">&amp;</span>amp<span class="token punctuation">;</span> Exit<span class="token operator">&lt;</span><span class="token operator">/</span>UIButton<span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span><span class="token class-name">UIButton</span> Disabled<span class="token operator">=</span><span class="token string">&quot;!this.DisplaySave&quot;</span> ClickEvent<span class="token operator">=</span><span class="token string">&quot;this.Save&quot;</span> ColourCode<span class="token operator">=</span><span class="token string">&quot;Bootstrap.ColourCode.save&quot;</span><span class="token operator">&gt;</span>@<span class="token keyword">this</span><span class="token punctuation">.</span>SaveButtonText<span class="token operator">&lt;</span><span class="token operator">/</span>UIButton<span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span><span class="token class-name">UIButton</span> Show<span class="token operator">=</span><span class="token string">&quot;this.DisplayCheckExit&quot;</span> ClickEvent<span class="token operator">=</span><span class="token string">&quot;this.ConfirmExit&quot;</span> ColourCode<span class="token operator">=</span><span class="token string">&quot;Bootstrap.ColourCode.danger_exit&quot;</span><span class="token operator">&gt;</span>Exit Without Saving<span class="token operator">&lt;</span><span class="token operator">/</span>UIButton<span class="token operator">&gt;</span>
                            <span class="token operator">&lt;</span><span class="token class-name">UIButton</span> Show<span class="token operator">=</span><span class="token string">&quot;this.DisplayExit&quot;</span> ClickEvent<span class="token operator">=</span><span class="token string">&quot;this.TryExit&quot;</span> ColourCode<span class="token operator">=</span><span class="token string">&quot;Bootstrap.ColourCode.nav&quot;</span><span class="token operator">&gt;</span>Exit<span class="token operator">&lt;</span><span class="token operator">/</span>UIButton<span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token operator">/</span>UIButtonColumn<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>UIRow<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>UIContainer<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>ButtonContent<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>ModalEditForm<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>UICard<span class="token operator">&gt;</span>
</code></pre></div><h3 id="weatherstation-list-form"><a href="#weatherstation-list-form" class="header-anchor">#</a> WeatherStation List Form</h3> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Weather/Components/Forms/WeatherStation/WeatherStationListForm.razor.cs</span>
@<span class="token keyword">using</span> CEC<span class="token punctuation">.</span>Blazor<span class="token punctuation">.</span>Components
@<span class="token keyword">using</span> CEC<span class="token punctuation">.</span>Blazor<span class="token punctuation">.</span>Components<span class="token punctuation">.</span>BaseForms
@<span class="token keyword">using</span> CEC<span class="token punctuation">.</span>Blazor<span class="token punctuation">.</span>Components<span class="token punctuation">.</span>UIControls
@<span class="token keyword">using</span> CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Data
@<span class="token keyword">using</span> CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Extensions
@<span class="token keyword">using</span> CEC<span class="token punctuation">.</span>Blazor<span class="token punctuation">.</span>Extensions

@<span class="token keyword">namespace</span> CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Components

@inherits ListComponentBase<span class="token operator">&lt;</span>DbWeatherStation<span class="token punctuation">,</span> WeatherForecastDbContext<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token class-name">UIWrapper</span> UIOptions<span class="token operator">=</span><span class="token string">&quot;@this.UIOptions&quot;</span> RecordConfiguration<span class="token operator">=</span><span class="token string">&quot;@this.Service.RecordConfiguration&quot;</span> OnView<span class="token operator">=</span><span class="token string">&quot;@OnView&quot;</span> OnEdit<span class="token operator">=</span><span class="token string">&quot;@OnEdit&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">UICardGrid</span> TRecord<span class="token operator">=</span><span class="token string">&quot;DbWeatherStation&quot;</span> IsCollapsible<span class="token operator">=</span><span class="token string">&quot;true&quot;</span> Paging<span class="token operator">=</span><span class="token string">&quot;this.Paging&quot;</span> IsLoading<span class="token operator">=</span><span class="token string">&quot;this.Loading&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Title<span class="token operator">&gt;</span>
            @<span class="token keyword">this</span><span class="token punctuation">.</span>ListTitle
        <span class="token operator">&lt;</span><span class="token operator">/</span>Title<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>TableHeader<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">UIGridTableHeaderColumn</span> TRecord<span class="token operator">=</span><span class="token string">&quot;DbWeatherStation&quot;</span> Column<span class="token operator">=</span><span class="token string">&quot;1&quot;</span> FieldName<span class="token operator">=</span><span class="token string">&quot;ID&quot;</span><span class="token operator">&gt;</span>ID<span class="token operator">&lt;</span><span class="token operator">/</span>UIGridTableHeaderColumn<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">UIGridTableHeaderColumn</span> TRecord<span class="token operator">=</span><span class="token string">&quot;DbWeatherStation&quot;</span> Column<span class="token operator">=</span><span class="token string">&quot;2&quot;</span> FieldName<span class="token operator">=</span><span class="token string">&quot;Name&quot;</span><span class="token operator">&gt;</span>Name<span class="token operator">&lt;</span><span class="token operator">/</span>UIGridTableHeaderColumn<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">UIGridTableHeaderColumn</span> TRecord<span class="token operator">=</span><span class="token string">&quot;DbWeatherStation&quot;</span> Column<span class="token operator">=</span><span class="token string">&quot;3&quot;</span> FieldName<span class="token operator">=</span><span class="token string">&quot;Latitude&quot;</span><span class="token operator">&gt;</span>Latitiude<span class="token operator">&lt;</span><span class="token operator">/</span>UIGridTableHeaderColumn<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">UIGridTableHeaderColumn</span> TRecord<span class="token operator">=</span><span class="token string">&quot;DbWeatherStation&quot;</span> Column<span class="token operator">=</span><span class="token string">&quot;4&quot;</span> FieldName<span class="token operator">=</span><span class="token string">&quot;Longitude&quot;</span><span class="token operator">&gt;</span>Longitude<span class="token operator">&lt;</span><span class="token operator">/</span>UIGridTableHeaderColumn<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">UIGridTableHeaderColumn</span> TRecord<span class="token operator">=</span><span class="token string">&quot;DbWeatherStation&quot;</span> Column<span class="token operator">=</span><span class="token string">&quot;5&quot;</span> FieldName<span class="token operator">=</span><span class="token string">&quot;Elevation&quot;</span><span class="token operator">&gt;</span>Elevation<span class="token operator">&lt;</span><span class="token operator">/</span>UIGridTableHeaderColumn<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">UIGridTableHeaderColumn</span> TRecord<span class="token operator">=</span><span class="token string">&quot;DbWeatherStation&quot;</span> Column<span class="token operator">=</span><span class="token string">&quot;6&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>UIGridTableHeaderColumn<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>TableHeader<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>RowTemplate<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token class-name">CascadingValue</span> Name<span class="token operator">=</span><span class="token string">&quot;RecordID&quot;</span> Value<span class="token operator">=</span><span class="token string">&quot;@context.ID&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token class-name">UIGridTableColumn</span> TRecord<span class="token operator">=</span><span class="token string">&quot;DbWeatherStation&quot;</span> Column<span class="token operator">=</span><span class="token string">&quot;1&quot;</span><span class="token operator">&gt;</span>@context<span class="token punctuation">.</span>ID<span class="token operator">&lt;</span><span class="token operator">/</span>UIGridTableColumn<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token class-name">UIGridTableColumn</span> TRecord<span class="token operator">=</span><span class="token string">&quot;DbWeatherStation&quot;</span> Column<span class="token operator">=</span><span class="token string">&quot;2&quot;</span><span class="token operator">&gt;</span>@context<span class="token punctuation">.</span>Name<span class="token operator">&lt;</span><span class="token operator">/</span>UIGridTableColumn<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token class-name">UIGridTableColumn</span> TRecord<span class="token operator">=</span><span class="token string">&quot;DbWeatherStation&quot;</span> Column<span class="token operator">=</span><span class="token string">&quot;3&quot;</span><span class="token operator">&gt;</span>@context<span class="token punctuation">.</span>Latitude<span class="token punctuation">.</span><span class="token function">AsLatitude</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>UIGridTableColumn<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token class-name">UIGridTableColumn</span> TRecord<span class="token operator">=</span><span class="token string">&quot;DbWeatherStation&quot;</span> Column<span class="token operator">=</span><span class="token string">&quot;4&quot;</span><span class="token operator">&gt;</span>@context<span class="token punctuation">.</span>Longitude<span class="token punctuation">.</span><span class="token function">AsLongitude</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>UIGridTableColumn<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token class-name">UIGridTableColumn</span> TRecord<span class="token operator">=</span><span class="token string">&quot;DbWeatherStation&quot;</span> Column<span class="token operator">=</span><span class="token string">&quot;5&quot;</span><span class="token operator">&gt;</span>@context<span class="token punctuation">.</span>Elevation<span class="token punctuation">.</span><span class="token function">DecimalPlaces</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>UIGridTableColumn<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token class-name">UIGridTableEditColumn</span> TRecord<span class="token operator">=</span><span class="token string">&quot;DbWeatherStation&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>UIGridTableEditColumn<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>CascadingValue<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>RowTemplate<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Navigation<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>UIListButtonRow<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>Paging<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token class-name">PagingControl</span> TRecord<span class="token operator">=</span><span class="token string">&quot;DbWeatherStation&quot;</span> Paging<span class="token operator">=</span><span class="token string">&quot;this.Paging&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>PagingControl<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>Paging<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>UIListButtonRow<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Navigation<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>UICardGrid<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>UIWrapper<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token class-name">BootstrapModal</span> @<span class="token keyword">ref</span><span class="token operator">=</span><span class="token string">&quot;this._BootstrapModal&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>BootstrapModal<span class="token operator">&gt;</span>
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Weather/Components/Forms/WeatherStation/WeatherStationListForm.razor.cs</span>
<span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Components</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Blazor<span class="token punctuation">.</span>Components<span class="token punctuation">.</span>BaseForms</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Data</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Services</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Threading<span class="token punctuation">.</span>Tasks</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Components</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">WeatherStationListForm</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ListComponentBase<span class="token punctuation">&lt;</span>DbWeatherStation<span class="token punctuation">,</span> WeatherForecastDbContext<span class="token punctuation">&gt;</span></span></span>
    <span class="token punctuation">{</span>
        <span class="token comment">/// The Injected Controller service for this record</span>
        <span class="token punctuation">[</span>Inject<span class="token punctuation">]</span>
        <span class="token keyword">protected</span> <span class="token return-type class-name">WeatherStationControllerService</span> ControllerService <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>


        <span class="token keyword">protected</span> <span class="token keyword">async</span> <span class="token keyword">override</span> <span class="token return-type class-name">Task</span> <span class="token function">OnInitializedAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>UIOptions<span class="token punctuation">.</span>MaxColumn <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>Service <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ControllerService<span class="token punctuation">;</span>
            <span class="token keyword">await</span> <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">OnInitializedAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">/// Method called when the user clicks on a row in the viewer.</span>
        <span class="token keyword">protected</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnView</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">OnViewAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>WeatherStationViewerForm<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/// Method called when the user clicks on a row Edit button.</span>
        <span class="token keyword">protected</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnEdit</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token generic-method"><span class="token function">OnEditAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>WeatherStationEditorForm<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="weather-report-forms"><a href="#weather-report-forms" class="header-anchor">#</a> Weather Report Forms</h3> <p>You can get these from the GitHub Repository.  They are the same as the Station forms except in the editor where we have a select and a lookuplist for the Weather Stations. The section from the editor form looks like this.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Weather/Components/Forms/WeatherReport/WeatherReportEditorForm.razor</span>
<span class="token operator">&lt;</span>UIFormRow<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">UILabelColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;4&quot;</span><span class="token operator">&gt;</span>
        Station<span class="token punctuation">:</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>UILabelColumn<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">UIColumn</span> Columns<span class="token operator">=</span><span class="token string">&quot;4&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token class-name">InputControlSelect</span> OptionList<span class="token operator">=</span><span class="token string">&quot;this.StationLookupList&quot;</span> @bind<span class="token operator">-</span>Value<span class="token operator">=</span><span class="token string">&quot;this.Service.Record.WeatherStationID&quot;</span> RecordValue<span class="token operator">=</span><span class="token string">&quot;@this.Service.ShadowRecord.WeatherStationID&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>InputControlSelect<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>UIColumn<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>UIFormRow<span class="token operator">&gt;</span>
</code></pre></div><p>The <code>StationLookupList</code> property is loaded in <code>OnParametersSetAsync</code> by making a call to the generic <code>GetLookUpListAsync\&lt;IRecord\&gt;()</code> method in the Controller Service.  We specify the actual record type - in this case <code>DbWeatherStation</code> - and the method calls back into the relevant Data Service which does it's magic (<code>GetRecordLookupListAsync</code> in DBContextExtensions in <code>CEC.Blazor/Extensions</code>) and returns a <code>SortedDictionary</code> list containing the record <code>ID</code> and <code>DisplayName</code> properties.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token keyword">using</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Blazor<span class="token punctuation">.</span>SPA<span class="token punctuation">.</span>Components<span class="token punctuation">.</span>Forms</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Data</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Services</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Components</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Threading<span class="token punctuation">.</span>Tasks</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Components</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">WeatherReportEditorForm</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">EditRecordFormBase<span class="token punctuation">&lt;</span>DbWeatherReport<span class="token punctuation">,</span> WeatherForecastDbContext<span class="token punctuation">&gt;</span></span></span>
    <span class="token punctuation">{</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Inject</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name">WeatherReportControllerService</span> ControllerService <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token keyword">public</span> <span class="token return-type class-name">SortedDictionary<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> StationLookupList <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token keyword">private</span> <span class="token return-type class-name">WeatherReportEditContext</span> EditorContext <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token keyword">protected</span> <span class="token keyword">async</span> <span class="token keyword">override</span> <span class="token return-type class-name">Task</span> <span class="token function">OnRenderAsync</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">bool</span></span> firstRender<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// Assign the correct controller service</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>firstRender<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>Service <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ControllerService<span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>EditorContext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">WeatherReportEditContext</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ControllerService<span class="token punctuation">.</span>RecordValueCollection<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>RecordEditorContext <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>EditorContext<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            StationLookupList <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Service<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetLookUpListAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DbWeatherStation<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">await</span> <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">OnRenderAsync</span><span class="token punctuation">(</span>firstRender<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Filter loading is part of <code>OnParametersSetAsync</code> process in <code>ListComponentBase</code></p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Blazor/Components/BaseForms/ListComponentBase.cs</span>

<span class="token keyword">protected</span> <span class="token keyword">async</span> <span class="token keyword">override</span> <span class="token return-type class-name">Task</span> <span class="token function">OnParametersSetAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">OnParametersSetAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Load the page - as we've reset everything this will be the first page with the default filter</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>IsService<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Load the filters for the recordset</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">LoadFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Load the paged recordset</span>
        <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Service<span class="token punctuation">.</span><span class="token function">LoadPagingAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>Loading <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/// Method called to load the filter</span>
<span class="token keyword">protected</span> <span class="token keyword">virtual</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">LoadFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>IsService<span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Service<span class="token punctuation">.</span>FilterList<span class="token punctuation">.</span>OnlyLoadIfFilters <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>OnlyLoadIfFilter<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>WeatherReportListForm</code> overrides <code>LoadFilter</code> to set up the record specific filters.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Weather/Components/Forms/WeatherReport/WeatherReportListForm.razor.cs</span>
<span class="token range operator">..</span><span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Parameter</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> WeatherStationID <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token range operator">..</span><span class="token range operator">..</span><span class="token range operator">..</span><span class="token punctuation">.</span>
<span class="token comment">/// inherited - loads the filter</span>
<span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">LoadFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Before the call to base so the filter is set before the get the list</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>IsService <span class="token operator">&amp;&amp;</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>WeatherStationID <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>Service<span class="token punctuation">.</span>FilterList<span class="token punctuation">.</span><span class="token function">Clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>Service<span class="token punctuation">.</span>FilterList<span class="token punctuation">.</span>OnlyLoadIfFilters <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>OnlyLoadIfFilter<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>Service<span class="token punctuation">.</span>FilterList<span class="token punctuation">.</span><span class="token function">SetFilter</span><span class="token punctuation">(</span><span class="token string">&quot;WeatherStationID&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>WeatherStationID<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">LoadFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token range operator">..</span><span class="token range operator">..</span><span class="token range operator">..</span>
</code></pre></div><h3 id="nav-menu"><a href="#nav-menu" class="header-anchor">#</a> Nav Menu</h3> <p>Add the menu link in <code>NavMenu</code>.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Weather/Components/Controls/NavMenu.cs</span>
    <span class="token range operator">..</span><span class="token range operator">..</span><span class="token punctuation">.</span>
    <span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;nav-item px-3&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>NavLink <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;nav-link&quot;</span> href<span class="token operator">=</span><span class="token string">&quot;weatherforecastmodal&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;oi oi-cloud-upload&quot;</span> aria<span class="token operator">-</span>hidden<span class="token operator">=</span><span class="token string">&quot;true&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span> Modal Weather
        <span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;nav-item px-3&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>NavLink <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;nav-link&quot;</span> href<span class="token operator">=</span><span class="token string">&quot;weatherstation&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;oi oi-cloudy&quot;</span> aria<span class="token operator">-</span>hidden<span class="token operator">=</span><span class="token string">&quot;true&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span> Weather Stations
        <span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;nav-item px-3&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>NavLink <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;nav-link&quot;</span> href<span class="token operator">=</span><span class="token string">&quot;weatherreport&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;oi oi-cloudy&quot;</span> aria<span class="token operator">-</span>hidden<span class="token operator">=</span><span class="token string">&quot;true&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span> Weather Reports
        <span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;nav-item px-3&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>NavLink <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;nav-link&quot;</span> href<span class="token operator">=</span><span class="token string">&quot;https://github.com/ShaunCurtis/CEC.Blazor.SPA&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;oi oi-fork&quot;</span> aria<span class="token operator">-</span>hidden<span class="token operator">=</span><span class="token string">&quot;true&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span> Github Repo
        <span class="token operator">&lt;</span><span class="token operator">/</span>NavLink<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token range operator">..</span><span class="token range operator">..</span><span class="token range operator">..</span>
</code></pre></div><h3 id="filter-control"><a href="#filter-control" class="header-anchor">#</a> Filter Control</h3> <p>Add a new control called <code>MonthYearIDListFilter</code>. This is used in the <code>WestherReport</code> list View to filter the records.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Weather/Components/Controls/MonthYearIDListFilter.razor.cs</span>
<span class="token keyword">using</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Blazor<span class="token punctuation">.</span>Data</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Data</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Services</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Components</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Components<span class="token punctuation">.</span>Forms</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Globalization</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Threading<span class="token punctuation">.</span>Tasks</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Components</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">partial</span> <span class="token keyword">class</span> <span class="token class-name">MonthYearIDListFilter</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ComponentBase</span></span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Inject the Controller Service</span>
        <span class="token punctuation">[</span>Inject<span class="token punctuation">]</span>
        <span class="token keyword">private</span> <span class="token return-type class-name">WeatherReportControllerService</span> Service <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token comment">// Boolean to control the ID Control Display</span>
        <span class="token punctuation">[</span>Parameter<span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> ShowID <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>

        <span class="token comment">// Month Lookup List</span>
        <span class="token keyword">private</span> <span class="token return-type class-name">SortedDictionary<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> MonthLookupList <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token comment">// Year Lookup List</span>
        <span class="token keyword">private</span> <span class="token return-type class-name">SortedDictionary<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> YearLookupList <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token comment">// Weather Station Lookup List</span>
        <span class="token keyword">private</span> <span class="token return-type class-name">SortedDictionary<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> IdLookupList <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token comment">// Dummy Edit Context for selects</span>
        <span class="token keyword">private</span> <span class="token return-type class-name">EditContext</span> EditContext <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">EditContext</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>Service<span class="token punctuation">.</span>Record<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// privates to hold current select values</span>
        <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">int</span></span> OldMonth <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">int</span></span> OldYear <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token class-name"><span class="token keyword">long</span></span> OldID <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token comment">// Month value - adds or removes the value from the filter list and kicks off Filter changed if changed</span>
        <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Month
        <span class="token punctuation">{</span>
            <span class="token keyword">get</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Service<span class="token punctuation">.</span>FilterList<span class="token punctuation">.</span><span class="token function">TryGetFilter</span><span class="token punctuation">(</span><span class="token string">&quot;Month&quot;</span><span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">object</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token punctuation">?</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token keyword">value</span> <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">set</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Service<span class="token punctuation">.</span>FilterList<span class="token punctuation">.</span><span class="token function">SetFilter</span><span class="token punctuation">(</span><span class="token string">&quot;Month&quot;</span><span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">else</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Service<span class="token punctuation">.</span>FilterList<span class="token punctuation">.</span><span class="token function">ClearFilter</span><span class="token punctuation">(</span><span class="token string">&quot;Month&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>Month <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>OldMonth<span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>OldMonth <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Month<span class="token punctuation">;</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>Service<span class="token punctuation">.</span><span class="token function">TriggerFilterChangedEvent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Year value - adds or removes the value from the filter list and kicks off Filter changed if changed</span>
        <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Year
        <span class="token punctuation">{</span>
            <span class="token keyword">get</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Service<span class="token punctuation">.</span>FilterList<span class="token punctuation">.</span><span class="token function">TryGetFilter</span><span class="token punctuation">(</span><span class="token string">&quot;Year&quot;</span><span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">object</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token punctuation">?</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token keyword">value</span> <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">set</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Service<span class="token punctuation">.</span>FilterList<span class="token punctuation">.</span><span class="token function">SetFilter</span><span class="token punctuation">(</span><span class="token string">&quot;Year&quot;</span><span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">else</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Service<span class="token punctuation">.</span>FilterList<span class="token punctuation">.</span><span class="token function">ClearFilter</span><span class="token punctuation">(</span><span class="token string">&quot;Year&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>Year <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>OldYear<span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>OldYear <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Year<span class="token punctuation">;</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>Service<span class="token punctuation">.</span><span class="token function">TriggerFilterChangedEvent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Weather Station value - adds or removes the value from the filter list and kicks off Filter changed if changed</span>
        <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> ID
        <span class="token punctuation">{</span>
            <span class="token keyword">get</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Service<span class="token punctuation">.</span>FilterList<span class="token punctuation">.</span><span class="token function">TryGetFilter</span><span class="token punctuation">(</span><span class="token string">&quot;WeatherStationID&quot;</span><span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token class-name"><span class="token keyword">object</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span> <span class="token punctuation">?</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token keyword">value</span> <span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">set</span>
            <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">value</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Service<span class="token punctuation">.</span>FilterList<span class="token punctuation">.</span><span class="token function">SetFilter</span><span class="token punctuation">(</span><span class="token string">&quot;WeatherStationID&quot;</span><span class="token punctuation">,</span> <span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">else</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Service<span class="token punctuation">.</span>FilterList<span class="token punctuation">.</span><span class="token function">ClearFilter</span><span class="token punctuation">(</span><span class="token string">&quot;WeatherStationID&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ID <span class="token operator">!=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>OldID<span class="token punctuation">)</span>
                <span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>OldID <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>ID<span class="token punctuation">;</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>Service<span class="token punctuation">.</span><span class="token function">TriggerFilterChangedEvent</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task</span> <span class="token function">OnInitializedAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>OldYear <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Year<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>OldMonth <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Month<span class="token punctuation">;</span>
            <span class="token keyword">await</span> <span class="token function">GetLookupsAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Method to get he LokkupLists</span>
        <span class="token keyword">protected</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task</span> <span class="token function">GetLookupsAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>IdLookupList <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Service<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetLookUpListAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DbWeatherStation<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;-- ALL STATIONS --&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// Get the months in the year</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>MonthLookupList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SortedDictionary<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span> <span class="token punctuation">{</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;-- ALL MONTHS --&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">13</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>MonthLookupList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> CultureInfo<span class="token punctuation">.</span>CurrentCulture<span class="token punctuation">.</span>DateTimeFormat<span class="token punctuation">.</span><span class="token function">GetMonthName</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// Gets a distinct list of Years in the Weather Reports</span>
            <span class="token punctuation">{</span>
                <span class="token class-name"><span class="token keyword">var</span></span> list <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>Service<span class="token punctuation">.</span><span class="token function">GetDistinctListAsync</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token constructor-invocation class-name">DbDistinctRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> FieldName <span class="token operator">=</span> <span class="token string">&quot;Year&quot;</span><span class="token punctuation">,</span> QuerySetName <span class="token operator">=</span> <span class="token string">&quot;WeatherReport&quot;</span><span class="token punctuation">,</span> DistinctSetName <span class="token operator">=</span> <span class="token string">&quot;DistinctList&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>YearLookupList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">SortedDictionary<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span> <span class="token punctuation">{</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;-- ALL YEARS --&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
                list<span class="token punctuation">.</span><span class="token function">ForEach</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>YearLookupList<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Weather/Components/Controls/MonthYearIDListFilter.razor</span>
@<span class="token keyword">using</span> CEC<span class="token punctuation">.</span>Blazor<span class="token punctuation">.</span>Components<span class="token punctuation">.</span>FormControls
@<span class="token keyword">using</span> Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Components<span class="token punctuation">.</span>Forms

@<span class="token keyword">namespace</span> CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Components
@inherits ComponentBase

<span class="token operator">&lt;</span><span class="token class-name">EditForm</span> EditContext<span class="token operator">=</span><span class="token string">&quot;this.EditContext&quot;</span><span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>table <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;table&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>tr<span class="token operator">&gt;</span>
            @<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>ShowID<span class="token punctuation">)</span>
            <span class="token punctuation">{</span>
                <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>Weather Station<span class="token operator">--</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>td<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>label <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span> <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">&quot;ID&quot;</span><span class="token operator">&gt;</span><span class="token class-name">Weather</span> Station<span class="token punctuation">:</span><span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>
                        <span class="token operator">&lt;</span><span class="token class-name">InputControlSelect</span> OptionList<span class="token operator">=</span><span class="token string">&quot;this.IdLookupList&quot;</span> @bind<span class="token operator">-</span>Value<span class="token operator">=</span><span class="token string">&quot;this.ID&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>InputControlSelect<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
            <span class="token punctuation">}</span>
            <span class="token operator">&lt;</span>td<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>Month<span class="token operator">--</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>label <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>Month<span class="token punctuation">:</span><span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token class-name">InputControlSelect</span> OptionList<span class="token operator">=</span><span class="token string">&quot;this.MonthLookupList&quot;</span> @bind<span class="token operator">-</span>Value<span class="token operator">=</span><span class="token string">&quot;this.Month&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>InputControlSelect<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>td<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>Year<span class="token operator">--</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>label <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>Year<span class="token punctuation">:</span><span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token class-name">InputControlSelect</span> OptionList<span class="token operator">=</span><span class="token string">&quot;this.YearLookupList&quot;</span> @bind<span class="token operator">-</span>Value<span class="token operator">=</span><span class="token string">&quot;this.Year&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>InputControlSelect<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>EditForm<span class="token operator">&gt;</span>
</code></pre></div><p>The filter displays a set of dropdowns.  When you change a value, the value is added, updated or deleted from the filter list and the service FilterUpdated event is kicked off.  This triggers a set of events which kicks off a ListForm UI Update.  We'll look at this in more detail in the next article in this series in a section of the article - Component Updating with Events.</p> <h2 id="cec-blazor-server"><a href="#cec-blazor-server" class="header-anchor">#</a> CEC.Blazor.Server</h2> <p>All the shared code is now complete and need to move down to the actual projects.</p> <p>To set up the Server we need to:</p> <ol><li>Configure the correct services - specific to the Server.</li> <li>Build the Views for each record type - these are the same views as used in the WASM Client.</li> <li>Build the API Controllers</li></ol> <h3 id="startup-cs"><a href="#startup-cs" class="header-anchor">#</a> Startup.cs</h3> <p>We need to update Startup with the new services, by updating <code>AddApplicationServices</code> in <code>ServiceCollectionExtensions.cs</code>.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Blazor.Server/Extensions/ServiceCollectionExtensions.cs</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">IServiceCollection</span> <span class="token function">AddApplicationServices</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">IServiceCollection</span> services<span class="token punctuation">,</span> <span class="token class-name">IConfiguration</span> configuration<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// Singleton service for the Server Side version of WeatherForecast Data Service </span>
    <span class="token comment">// Dummy service produces a new recordset each time the application runs </span>
    services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddSingleton</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IFactoryDataService<span class="token punctuation">&lt;</span>WeatherForecastDbContext<span class="token punctuation">&gt;</span><span class="token punctuation">,</span> WeatherDummyDataService<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// services.AddSingleton&lt;IFactoryDataService&lt;WeatherForecastDbContext&gt;, FactoryServerDataService&lt;WeatherForecastDbContext&gt;&gt;();</span>

    <span class="token comment">// Scoped service for the WeatherForecast Controller Service</span>
    services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddScoped</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>WeatherForecastControllerService<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddScoped</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>WeatherStationControllerService<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddScoped</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>WeatherReportControllerService<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Factory for building the DBContext </span>
    <span class="token class-name"><span class="token keyword">var</span></span> dbContext <span class="token operator">=</span> configuration<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetValue</span><span class="token generic class-name"><span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">&quot;Configuration:DBContext&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddDbContextFactory</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>WeatherForecastDbContext<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>options <span class="token operator">=&gt;</span> options<span class="token punctuation">.</span><span class="token function">UseSqlServer</span><span class="token punctuation">(</span>dbContext<span class="token punctuation">)</span><span class="token punctuation">,</span> ServiceLifetime<span class="token punctuation">.</span>Singleton<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> services<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="weather-station-routes-views"><a href="#weather-station-routes-views" class="header-anchor">#</a> Weather Station Routes/Views</h3> <p>These are almost trivial.  All the code and markup is in the forms.  We just declare the route and add the form to the View.  The views for WeatherStation are shown below.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Blazor.Server/Routes/WeatherStation/WeatherStationViewerView.razor</span>

@<span class="token keyword">namespace</span> CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Components<span class="token punctuation">.</span>Views
@implements IView

@inherits ViewBase

<span class="token operator">&lt;</span>WeatherStationViewerForm<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>WeatherStationViewerForm<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token class-name">UIBootstrapBase</span> Css<span class="token operator">=</span><span class="token string">&quot;mt-2&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token class-name">WeatherReportListForm</span> WeatherStationID<span class="token operator">=</span><span class="token string">&quot;this.ID&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>WeatherReportListForm<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>UIBootstrapBase<span class="token operator">&gt;</span>

@code <span class="token punctuation">{</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Parameter</span></span><span class="token punctuation">]</span> <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> ID <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Blazor.Server/Routes/WeatherStation/WeatherStationEditorView.razor</span>

@<span class="token keyword">using</span> CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Components

@inherits ViewBase
@implements IView

@<span class="token keyword">namespace</span> CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Components<span class="token punctuation">.</span>Views

<span class="token operator">&lt;</span><span class="token class-name">WeatherStationEditorForm</span> ID<span class="token operator">=</span><span class="token string">&quot;this.ID&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>WeatherStationEditorForm<span class="token operator">&gt;</span>

@code <span class="token punctuation">{</span>

    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Parameter</span></span><span class="token punctuation">]</span> <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> ID <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Blazor.Server/Routes/WeatherStation/WeatherStationListView.razor</span>
@<span class="token keyword">namespace</span> CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Components<span class="token punctuation">.</span>Views

@inherits ViewBase
@implements IView

<span class="token operator">&lt;</span><span class="token class-name">WeatherStationListForm</span> Properties<span class="token operator">=</span><span class="token string">&quot;this.UIProperties&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>WeatherStationListForm<span class="token operator">&gt;</span>

@code <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">PropertyCollection</span> UIProperties
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span>
        <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token keyword">var</span></span> props <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">PropertyCollection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            props<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>PropertyConstants<span class="token punctuation">.</span>RowNavigateToViewer<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            props<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>PropertyConstants<span class="token punctuation">.</span>ShowButtons<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            props<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>PropertyConstants<span class="token punctuation">.</span>ShowEdit<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            props<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>PropertyConstants<span class="token punctuation">.</span>ShowAdd<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            props<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>PropertyConstants<span class="token punctuation">.</span>UseModalViewer<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> props<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="weather-station-controllers"><a href="#weather-station-controllers" class="header-anchor">#</a> Weather Station Controllers</h3> <p>The controllers act as gateways to the data controllers for each service.  They are self explanatory.  We use <code>HttpgGet</code> where we are just making a data request, and <code>HttpPost</code> where we need to post information into the API.  The controller for each record type has the same patterns - building new ones is a copy and replace exercise.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Blazor.Server/Controllers/WeatherStationController.cs</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Threading<span class="token punctuation">.</span>Tasks</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Mvc</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token class-name">MVC</span> <span class="token operator">=</span> <span class="token class-name">Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Mvc</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>Extensions<span class="token punctuation">.</span>Logging</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Data</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Blazor<span class="token punctuation">.</span>Data</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Blazor<span class="token punctuation">.</span>Services</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Blazor<span class="token punctuation">.</span>Server<span class="token punctuation">.</span>Controllers</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ApiController</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WeatherStationController</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ControllerBase</span></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">protected</span> <span class="token return-type class-name">IFactoryDataService<span class="token punctuation">&lt;</span>WeatherForecastDbContext<span class="token punctuation">&gt;</span></span> DataService <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">ILogger<span class="token punctuation">&lt;</span>WeatherForecastController<span class="token punctuation">&gt;</span></span> logger<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token function">WeatherStationController</span><span class="token punctuation">(</span><span class="token class-name">ILogger<span class="token punctuation">&lt;</span>WeatherForecastController<span class="token punctuation">&gt;</span></span> logger<span class="token punctuation">,</span> <span class="token class-name">IFactoryDataService<span class="token punctuation">&lt;</span>WeatherForecastDbContext<span class="token punctuation">&gt;</span></span> dataService<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>DataService <span class="token operator">=</span> dataService<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>logger <span class="token operator">=</span> logger<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MVC<span class="token punctuation">.</span>Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;weatherstation/list&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span>DbWeatherStation<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">GetList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">await</span> DataService<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetRecordListAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DbWeatherStation<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MVC<span class="token punctuation">.</span>Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;weatherstation/filteredlist&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpPost</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span>DbWeatherStation<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">GetFilteredRecordListAsync</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromBody</span></span><span class="token punctuation">]</span> <span class="token class-name">FilterListCollection</span> filterList<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">await</span> DataService<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetFilteredRecordListAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DbWeatherStation<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>filterList<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MVC<span class="token punctuation">.</span>Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;weatherstation/lookuplist&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>SortedDictionary<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">GetLookupListAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">await</span> DataService<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetLookupListAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DbWeatherStation<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MVC<span class="token punctuation">.</span>Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;weatherstation/distinctlist&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpPost</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">GetDistinctListAsync</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromBody</span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">string</span></span> fieldName<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">await</span> DataService<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetDistinctListAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DbWeatherStation<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>fieldName<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MVC<span class="token punctuation">.</span>Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;weatherstation/count&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span> <span class="token function">Count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">await</span> DataService<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetRecordListCountAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DbWeatherStation<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MVC<span class="token punctuation">.</span>Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;weatherstation/get&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>DbWeatherStation<span class="token punctuation">&gt;</span></span> <span class="token function">GetRec</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">await</span> DataService<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetRecordAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DbWeatherStation<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MVC<span class="token punctuation">.</span>Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;weatherstation/read&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpPost</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>DbWeatherStation<span class="token punctuation">&gt;</span></span> <span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromBody</span></span><span class="token punctuation">]</span><span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">await</span> DataService<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetRecordAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DbWeatherStation<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MVC<span class="token punctuation">.</span>Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;weatherstation/update&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpPost</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>DbTaskResult<span class="token punctuation">&gt;</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromBody</span></span><span class="token punctuation">]</span><span class="token class-name">DbWeatherStation</span> record<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">await</span> DataService<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">UpdateRecordAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DbWeatherStation<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MVC<span class="token punctuation">.</span>Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;weatherstation/create&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpPost</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>DbTaskResult<span class="token punctuation">&gt;</span></span> <span class="token function">Create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromBody</span></span><span class="token punctuation">]</span><span class="token class-name">DbWeatherStation</span> record<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">await</span> DataService<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">CreateRecordAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DbWeatherStation<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MVC<span class="token punctuation">.</span>Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;weatherstation/delete&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpPost</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>DbTaskResult<span class="token punctuation">&gt;</span></span> <span class="token function">Delete</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromBody</span></span><span class="token punctuation">]</span> <span class="token class-name">DbWeatherStation</span> record<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">await</span> DataService<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">DeleteRecordAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DbWeatherStation<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Blazor.WASM.Server/Controllers/WeatherReportController.cs</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Threading<span class="token punctuation">.</span>Tasks</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Mvc</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token class-name">MVC</span> <span class="token operator">=</span> <span class="token class-name">Microsoft<span class="token punctuation">.</span>AspNetCore<span class="token punctuation">.</span>Mvc</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">Microsoft<span class="token punctuation">.</span>Extensions<span class="token punctuation">.</span>Logging</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Weather<span class="token punctuation">.</span>Data</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Blazor<span class="token punctuation">.</span>Data</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Blazor<span class="token punctuation">.</span>Services</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token namespace">CEC<span class="token punctuation">.</span>Blazor<span class="token punctuation">.</span>Server<span class="token punctuation">.</span>Controllers</span>
<span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">ApiController</span></span><span class="token punctuation">]</span>
    <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WeatherReportController</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">ControllerBase</span></span>
    <span class="token punctuation">{</span>
        <span class="token keyword">protected</span> <span class="token return-type class-name">IFactoryDataService<span class="token punctuation">&lt;</span>WeatherForecastDbContext<span class="token punctuation">&gt;</span></span> DataService <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

        <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name">ILogger<span class="token punctuation">&lt;</span>WeatherForecastController<span class="token punctuation">&gt;</span></span> logger<span class="token punctuation">;</span>

        <span class="token keyword">public</span> <span class="token function">WeatherReportController</span><span class="token punctuation">(</span><span class="token class-name">ILogger<span class="token punctuation">&lt;</span>WeatherForecastController<span class="token punctuation">&gt;</span></span> logger<span class="token punctuation">,</span> <span class="token class-name">IFactoryDataService<span class="token punctuation">&lt;</span>WeatherForecastDbContext<span class="token punctuation">&gt;</span></span> dataService<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>DataService <span class="token operator">=</span> dataService<span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>logger <span class="token operator">=</span> logger<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MVC<span class="token punctuation">.</span>Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;weatherreport/list&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span>DbWeatherReport<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">GetList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">await</span> DataService<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetRecordListAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DbWeatherReport<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MVC<span class="token punctuation">.</span>Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;weatherreport/filteredlist&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpPost</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span>DbWeatherReport<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">GetFilteredRecordListAsync</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromBody</span></span><span class="token punctuation">]</span> <span class="token class-name">FilterListCollection</span> filterList<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">await</span> DataService<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetFilteredRecordListAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DbWeatherReport<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>filterList<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MVC<span class="token punctuation">.</span>Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;weatherreport/lookuplist&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>SortedDictionary<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">GetLookupListAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">await</span> DataService<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetLookupListAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DbWeatherReport<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MVC<span class="token punctuation">.</span>Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;weatherreport/distinctlist&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpPost</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>List<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span> <span class="token function">GetDistinctListAsync</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromBody</span></span><span class="token punctuation">]</span> <span class="token class-name"><span class="token keyword">string</span></span> fieldName<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">await</span> DataService<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetDistinctListAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DbWeatherReport<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>fieldName<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MVC<span class="token punctuation">.</span>Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;weatherreport/count&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span><span class="token keyword">int</span><span class="token punctuation">&gt;</span></span> <span class="token function">Count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">await</span> DataService<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetRecordListCountAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DbWeatherReport<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MVC<span class="token punctuation">.</span>Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;weatherreport/get&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpGet</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>DbWeatherReport<span class="token punctuation">&gt;</span></span> <span class="token function">GetRec</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">await</span> DataService<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetRecordAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DbWeatherReport<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MVC<span class="token punctuation">.</span>Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;weatherreport/read&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpPost</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>DbWeatherReport<span class="token punctuation">&gt;</span></span> <span class="token function">Read</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromBody</span></span><span class="token punctuation">]</span><span class="token class-name"><span class="token keyword">int</span></span> id<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">await</span> DataService<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetRecordAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DbWeatherReport<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MVC<span class="token punctuation">.</span>Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;weatherreport/update&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpPost</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>DbTaskResult<span class="token punctuation">&gt;</span></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromBody</span></span><span class="token punctuation">]</span><span class="token class-name">DbWeatherReport</span> record<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">await</span> DataService<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">UpdateRecordAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DbWeatherReport<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MVC<span class="token punctuation">.</span>Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;weatherreport/create&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpPost</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>DbTaskResult<span class="token punctuation">&gt;</span></span> <span class="token function">Create</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromBody</span></span><span class="token punctuation">]</span><span class="token class-name">DbWeatherReport</span> record<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">await</span> DataService<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">CreateRecordAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DbWeatherReport<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MVC<span class="token punctuation">.</span>Route</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">&quot;weatherreport/delete&quot;</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">HttpPost</span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token return-type class-name">Task<span class="token punctuation">&lt;</span>DbTaskResult<span class="token punctuation">&gt;</span></span> <span class="token function">Delete</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">FromBody</span></span><span class="token punctuation">]</span> <span class="token class-name">DbWeatherReport</span> record<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">await</span> DataService<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">DeleteRecordAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>DbWeatherReport<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="cec-blazor-wasm-client"><a href="#cec-blazor-wasm-client" class="header-anchor">#</a> CEC.Blazor.WASM.Client</h2> <p>To set up the client we need to:</p> <ol><li>Configure the correct services - specific to the Client.</li> <li>Build the Views for each record type - same as Server.</li></ol> <h3 id="program-cs"><a href="#program-cs" class="header-anchor">#</a> program.cs</h3> <p>We need to update program with the new services.  We do this by updating <code>AddApplicationServices</code> in <code>ServiceCollectionExtensions.cs</code>.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code><span class="token comment">// CEC.Blazor.WASM/Client/Extensions/ServiceCollectionExtensions.cs</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name">IServiceCollection</span> <span class="token function">AddApplicationServices</span><span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token class-name">IServiceCollection</span> services<span class="token punctuation">,</span> <span class="token class-name">IConfiguration</span> configuration<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
            <span class="token comment">// Scoped service for the WASM Client version of WASM Factory Data Service </span>
            services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddScoped</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>IFactoryDataService<span class="token punctuation">&lt;</span>WeatherForecastDbContext<span class="token punctuation">&gt;</span><span class="token punctuation">,</span> FactoryWASMDataService<span class="token punctuation">&lt;</span>WeatherForecastDbContext<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// Scoped service for the WeatherForecast Controller Service</span>
            services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddScoped</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>WeatherForecastControllerService<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddScoped</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>WeatherStationControllerService<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            services<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">AddScoped</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>WeatherReportControllerService<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> services<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>That's it.  The Client is configured.</p> <h2 id="cec-blazor-wasm-server"><a href="#cec-blazor-wasm-server" class="header-anchor">#</a> CEC.Blazor.WASM.Server</h2> <p>The WASM Server is only present to debug code. It only:</p> <ol><li>Configure the server level services.</li> <li>contains a copy of the Server Controllers.</li></ol> <h3 id="wrap-up"><a href="#wrap-up" class="header-anchor">#</a> Wrap Up</h3> <p>This article demonstrates how to add more record types to the Weather application and build out either the Blazor WASM or Server project to handle the new types.</p> <h2 id="history"><a href="#history" class="header-anchor">#</a> History</h2> <ul><li>2-Oct-2020: Initial version.</li> <li>17-Nov-2020: Major Blazor.CEC library changes.  Change to ViewManager from Router and new Component base implementation.</li> <li>7-Feb-2021: Major updates to Services, project structure and data editing.</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      
      <a href="/Building-a-Database-Application-in-Blazor/Building-a-Database-Application-in-Blazor-Part-5.html" class="prev">
        Part 5 - View Components - CRUD List Operations in the UI
      </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.a96bab3c.js" defer></script><script src="/assets/js/3.3d8b86b8.js" defer></script><script src="/assets/js/19.170882f0.js" defer></script>
  </body>
</html>
